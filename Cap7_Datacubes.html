
<!DOCTYPE html>


<html lang="en" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>7. Cap√≠tulo 7 ¬∑ Cubos de Im√°genes Satelitales &#8212; GeoIA aplicado a Im√°genes Satelitales</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="_static/styles/sphinx-book-theme.css?v=a3416100" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=f281be69"></script>
    <script src="_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'Cap7_Datacubes';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="8. Lab 002 ¬∑ Random Forest (Rosario) ‚Äî Folium / Thebe" href="notebooks/Lab_002_RandomForest_Rosario_FOLIUM_THEBE_FIXED.html" />
    <link rel="prev" title="6. Cap√≠tulo 6 ¬∑ Serie Temporales" href="Cap6_ST.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="_static/logoAgua.png" class="logo__image only-light" alt="GeoIA aplicado a Im√°genes Satelitales - Home"/>
    <script>document.write(`<img src="_static/logoAgua.png" class="logo__image only-dark" alt="GeoIA aplicado a Im√°genes Satelitales - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="intro.html">
                    Pr√≥logo
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="Cap1_Tecnicas.html">1. Cap√≠tulo 1 ¬∑ Teledetecci√≥n y Aprendizaje Autom√°tico</a></li>
<li class="toctree-l1"><a class="reference internal" href="Cap2_RFRosario.html">2. Cap√≠tulo 2 ¬∑ Random Forest en GEE</a></li>
<li class="toctree-l1"><a class="reference internal" href="Cap3_gee_colab.html">3. Cap√≠tulo 3 ¬∑ Random Forest en GEE y Colab</a></li>
<li class="toctree-l1"><a class="reference internal" href="Cap4_SVM_DT.html">4. Cap√≠tulo 4 ¬∑ M√°quina de Soporte Vectorial y √°rbol de Decisi√≥n</a></li>
<li class="toctree-l1"><a class="reference internal" href="Cap5_Agua.html">5. Cap√≠tulo 5 ¬∑ Random Forest para detectar agua</a></li>
<li class="toctree-l1"><a class="reference internal" href="Cap6_ST.html">6. Cap√≠tulo 6 ¬∑ Serie Temporales</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">7. Cap√≠tulo 7 ¬∑ Cubos de Im√°genes Satelitales</a></li>
<li class="toctree-l1"><a class="reference internal" href="notebooks/Lab_002_RandomForest_Rosario_FOLIUM_THEBE_FIXED.html">8. Cap√≠tulo 9 ¬∑ Lab 002 ¬∑ Random Forest (Rosario)  Thebe</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/cdg-idera/PAT_INT_GEE" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/cdg-idera/PAT_INT_GEE/issues/new?title=Issue%20on%20page%20%2FCap7_Datacubes.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/Cap7_Datacubes.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Cap√≠tulo 7 ¬∑ Cubos de Im√°genes Satelitales</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#introduccion">7.1. Introducci√≥n</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#de-imagenes-satelitales-a-cubos-de-imagenes">7.2. De im√°genes satelitales a Cubos de Im√°genes</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#revisitando-la-tierra-frecuencia-y-volumen-de-datos-en-sentinel-2">7.3. Revisitando la Tierra: frecuencia y volumen de datos en Sentinel 2</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#aplicaciones-reales-y-cierre">7.4. Aplicaciones reales y cierre</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#datacube-de-temperatura-superficial-en-bahia-blanca-con-gee">7.5. Datacube de temperatura superficial en Bah√≠a Blanca con GEE</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#paso-1-definir-la-region-de-interes">7.5.1. Paso 1: Definir la regi√≥n de inter√©s</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#paso-2-seleccion-temporal">7.5.2. Paso 2: Selecci√≥n temporal</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#paso-3-cargar-modis-lst-y-convertir-unidades">7.5.3. Paso 3: Cargar MODIS LST y convertir unidades</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#paso-4-parametros-visuales-para-el-mapa">7.5.4. Paso 4: Par√°metros visuales para el mapa</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#paso-5-y-6-generar-imagenes-mensuales-y-mostrarlas-en-el-mapa">7.5.5. Paso 5 y 6: Generar im√°genes mensuales y mostrarlas en el mapa</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#paso-7-crear-tabla-de-promedios-mensuales-reduccion-espacial">7.5.6. Paso 7: Crear tabla de promedios mensuales (reducci√≥n espacial)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#paso-8-visualizar-la-serie-de-tiempo">7.5.7. Paso 8: Visualizar la serie de tiempo</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#paso-9-estetica-del-mapa">7.5.8. Paso 9: Est√©tica del mapa</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#paso-10-exportar-la-serie-al-drive">7.5.9. Paso 10: Exportar la serie al Drive</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#conclusion-de-esta-seccion">7.6. Conclusi√≥n de esta secci√≥n</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#visualizacion-y-analisis-de-un-datacube-de-precipitacion-mensual-en-bahia-blanca-chirps">7.7. Visualizaci√≥n y an√°lisis de un datacube de precipitaci√≥n mensual en Bah√≠a Blanca (CHIRPS)</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#que-es-chirps">7.8. ¬øQu√© es CHIRPS?</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#seleccion-de-la-region-bahia-blanca">7.9. Selecci√≥n de la regi√≥n: Bah√≠a Blanca</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#definimos-el-periodo-de-analisis">7.9.1. Definimos el per√≠odo de an√°lisis</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#cargamos-la-coleccion-chirps-diaria">7.9.2. Cargamos la colecci√≥n CHIRPS diaria</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#paleta-de-colores-para-visualizacion">7.9.3. Paleta de colores para visualizaci√≥n</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#visualizamos-cada-capa-mensual-del-datacube">7.9.4. Visualizamos cada capa mensual del datacube</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#calculo-de-la-serie-temporal-mensual-promedio">7.9.5. C√°lculo de la serie temporal mensual promedio</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#grafico-de-barras-de-la-serie">7.9.6. Gr√°fico de barras de la serie</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ejemplo-concreto-feature-14">7.10. Ejemplo concreto: Feature 14</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#mejora-estetica-del-mapa">7.10.1. Mejora est√©tica del mapa</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">7.11. Conclusi√≥n de esta secci√≥n</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#clasificacion-de-tipos-de-suelo-con-sentinel-2-un-enfoque-basado-en-datacubes">7.12. Clasificaci√≥n de tipos de suelo con Sentinel-2: un enfoque basado en datacubes</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">7.12.1. Introducci√≥n</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#coleccion-de-imagenes-sentinel-2-y-preparacion-del-mosaico-base">7.12.2. Colecci√≥n de im√°genes Sentinel-2 y preparaci√≥n del mosaico base</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#definicion-de-clases-de-suelo-y-preparacion-de-datos-de-entrenamiento">7.13. Definici√≥n de clases de suelo y preparaci√≥n de datos de entrenamiento</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#entrenamiento-del-modelo-random-forest">7.13.1. Entrenamiento del modelo Random Forest</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#clasificacion-de-la-imagen-y-visualizacion-del-resultado">7.13.2. Clasificaci√≥n de la imagen y visualizaci√≥n del resultado</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#evaluacion-del-modelo">7.13.3. Evaluaci√≥n del modelo</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#configuracion-de-la-serie-temporal">7.13.4. Configuraci√≥n de la serie temporal</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#clasificacion-temporal-e-interpretacion-del-datacube">7.13.5. Clasificaci√≥n temporal e interpretaci√≥n del datacube</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#interpretacion-especifica-ejemplo-marzo-2024">7.13.6. Interpretaci√≥n espec√≠fica: ejemplo marzo 2024</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#conclusion">7.13.7. Conclusi√≥n</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ejemplo-2-serie-temporal-de-clases-de-suelo-con-clasificador-entrenado">7.14. Ejemplo 2: Serie Temporal de Clases de Suelo con Clasificador Entrenado</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#bloque-2-definicion-de-etiquetas-de-clases">7.14.1. BLOQUE 2: Definici√≥n de etiquetas de clases</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#bloque-3-aplicacion-del-clasificador-por-periodo">7.14.2. BLOQUE 3: Aplicaci√≥n del clasificador por per√≠odo</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#bloque-4-conteo-de-pixeles-por-clase">7.14.3. BLOQUE 4: Conteo de p√≠xeles por clase</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#bloque-5-visualizacion-absoluta">7.14.4. BLOQUE 5: Visualizaci√≥n absoluta</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#bloque-6-conversion-a-porcentajes">7.14.5. BLOQUE 6: Conversi√≥n a porcentajes</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#bloque-7-visualizacion-porcentual">7.14.6. BLOQUE 7: Visualizaci√≥n porcentual</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id3">7.15. Conclusi√≥n</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#video-del-capitulo">7.16. Video del cap√≠tulo</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="capitulo-7-cubos-de-imagenes-satelitales">
<h1><span class="section-number">7. </span>Cap√≠tulo 7 ¬∑ Cubos de Im√°genes Satelitales<a class="headerlink" href="#capitulo-7-cubos-de-imagenes-satelitales" title="Link to this heading">#</a></h1>
<section id="introduccion">
<h2><span class="section-number">7.1. </span>Introducci√≥n<a class="headerlink" href="#introduccion" title="Link to this heading">#</a></h2>
<p>üé¨ ¬°Seguimos explorando las Series Temporales aplicadas a la Informaci√≥n Geoespacial! üåçüìä
En este nuevo episodio, damos un paso m√°s: introducimos los cubos de datos üßäüõ∞Ô∏è como estructura clave para organizar, analizar y visualizar im√°genes satelitales a lo largo del tiempo.</p>
<p>üöÄ A partir de la misi√≥n Sentinel-3 de la Agencia Espacial Europea, repasamos conceptos esenciales como bandas espectrales, √≠ndices y, sobre todo, definimos qu√© es un cubo de datos geoespaciales, cu√°les son sus dimensiones (espacio, tiempo, espectro, categor√≠as) y por qu√© resultan fundamentales para el an√°lisis ambiental y territorial.</p>
<p>üí° Para ilustrar su utilidad, presentamos tres casos pr√°cticos donde aplicamos cubos de datos a variables reales:</p>
<p>üî∑ Ejemplo 1: Cubo de temperatura superficial MODIS üå°Ô∏è
Creamos un cubo de datos mensual para Bah√≠a Blanca con im√°genes MODIS (2024-2025). Calculamos promedios mensuales, generamos una serie temporal y exportamos los resultados en CSV para analizarlos en Colab. Detectamos tendencias, estacionalidad y anomal√≠as t√©rmicas ‚Äîcomo la registrada en marzo de 2025.
üìì Notebook: Lab_007_ST_BahiaBlanca.ipynb</p>
<p>üî∑ Ejemplo 2: Cubo de precipitaci√≥n con CHIRPS üåßÔ∏èüìâ
Construimos un cubo de datos de precipitaci√≥n mensual para la misma regi√≥n, utilizando la colecci√≥n CHIRPS. Visualizamos capas en el mapa, graficamos valores mensuales y detectamos eventos extremos, como lluvias an√≥malas en marzo de 2025. Gr√°ficos y tablas complementan el an√°lisis en consola.</p>
<p>üî∑ Ejemplo 3: Cubo de clasificaci√≥n de suelo con Sentinel-2 y Random Forest üåæüèôÔ∏è
Generamos un cubo categ√≥rico bimestral de tipos de suelo (agua, urbano, cultivos, etc.) para 2024. A partir de im√°genes Sentinel-2 y un modelo Random Forest, construimos una serie temporal clasificada y mostramos su evoluci√≥n en gr√°ficos apilados. Incluimos m√©tricas de validaci√≥n, porcentajes y recuentos por clase para interpretar cambios en el paisaje, como expansi√≥n urbana o variaci√≥n en √°reas verdes.</p>
</section>
<section id="de-imagenes-satelitales-a-cubos-de-imagenes">
<h2><span class="section-number">7.2. </span>De im√°genes satelitales a Cubos de Im√°genes<a class="headerlink" href="#de-imagenes-satelitales-a-cubos-de-imagenes" title="Link to this heading">#</a></h2>
<p>Al observar una imagen tomada desde un sat√©lite, es tentador pensar que estamos viendo una simple foto de la Tierra como si fuera una fotograf√≠a a√©rea en alta resoluci√≥n, pero eso ser√≠a una visi√≥n limitada, ser√≠a reducirla a lo que nuestros ojos alcanzan a ver, cuando en realidad hay mucho m√°s que eso.</p>
<p><img alt="" src="imagenes/spectrum.png" /></p>
<p>En verdad, lo que capturan los sat√©lites no es una simple imagen como una fotograf√≠a convencional, sino un conjunto de bandas espectrales, cada una correspondiente a una distinta longitud de onda del espectro electromagn√©tico</p>
<p><img alt="" src="_images/PlacaNegraMedia2.png" /></p>
<p>Estas bandas, combinadas, forman una representaci√≥n detallada y multidimensional de lo que ocurre en la superficie terrestre. Pero la informaci√≥n no termina ac√°, las bandas pueden ser utilizadas individualmente o combinadas mediante √≠ndices espectrales, que son f√≥rmulas matem√°ticas dise√±adas para resaltar ciertos fen√≥menos, como la vegetaci√≥n, el agua, los suelos y las √°reas urbanas, en funci√≥n de su comportamiento espectral.</p>
<p><img alt="" src="_images/PlacaNegraMedia1.png" /></p>
<p>El cat√°logo awesome spectral indecis, re√∫ne m√°s de 250 de estos √≠ndices organizados por dominio de aplicaci√≥n, lo que lo convierte en una herramienta clave para interpretar y extraer informaci√≥n significativa de las im√°genes satelitales. El cumulo de cientos de √≠ndices de este cat√°logo puede ser accedido desde distintos paquetes en lenguajes d eprogramacion como javascript, Python, R y julia.</p>
<p><img alt="" src="_images/asiUsedBy.png" /></p>
<p>Un excelente ejemplo de esta riqueza espectral es la misi√≥n Sentinel-2, operada por la Agencia Espacial Europea. Esta misi√≥n no toma simplemente una foto del planeta, sino que registra 13 bandas espectrales distintas, distribuidas en diferentes partes del espectro electromagn√©tico y con distintas resoluciones espaciales 10, 20 y 60 metros, cada una con un prop√≥sito espec√≠fico.</p>
<p>Estas bandas incluyen banda 1 aerosol captura informaci√≥n en la regi√≥n del violeta, √∫til para la correcci√≥n atmosf√©rica y detecci√≥n de aerosoles, resoluci√≥n 60 metros,
banda 2 azul, banda 3 verde y banda 4 rojo, bandas visibles al ojo humano que permiten generar im√°genes en color natural, resoluci√≥n 10 metros,
banda 5, 6 y 7, conocidas como red edge, estas bandas cubren la transici√≥n entre el rojo y el infrarrojo cercano, son fundamentales para estudios avanzados de vegetaci√≥n y agricultura de precisi√≥n, resoluci√≥n 20 metros,
banda 8 y banda  8a, bandas en el infrarrojo cercano, claves para evaluar la salud de la vegetaci√≥n, calcular √≠ndices como el NDVI y detectar cambios en la biomasa, resoluci√≥n 10 metros, banda 8 y 20 metros en banda 8a,<br />
banda 9, vapor de agua, √∫til para corregir efectos atmosf√©ricos asociados al vapor de agua, resoluci√≥n 60 metros,
banda 10, cirrus, dise√±ada espec√≠ficamente para la detecci√≥n de nubes cirrus que pueden interferir en el an√°lisis de otras bandas, resoluci√≥n 60 metros,
banda 11 y banda 12, SWIR 1 y SWIR 2, bandas en el infrarrojo de onda corta, √∫tiles para analizar contenido de  humedad del suelo, nieve, hielo o detectar √°reas afectadas por incendios, resoluci√≥n 20 metros,
Cada una de estas bandas aporta una capa distinta de informaci√≥n. Y al combinar esta riqueza espectral con series temporales, √≠ndices matem√°ticos e inteligencia artificial, podemos transformar simples im√°genes en verdaderos an√°lisis din√°micos del territorio.
Entonces, lo que vemos como una imagen, en realidad, es una colecci√≥n multidimensional de datos espectrales. Cada p√≠xel tiene m√∫ltiples valores asociados, uno por cada banda, revelando propiedades biof√≠sicas que no podr√≠amos captar con nuestros sentidos. Es como si vi√©ramos el mundo con ‚Äúojos cient√≠ficos‚Äù.
Y esto ocurre para cada punto de la Tierra observado por la misi√≥n. Pero adem√°s, estos puntos no se observan una √∫nica vez</p>
</section>
<section id="revisitando-la-tierra-frecuencia-y-volumen-de-datos-en-sentinel-2">
<h2><span class="section-number">7.3. </span>Revisitando la Tierra: frecuencia y volumen de datos en Sentinel 2<a class="headerlink" href="#revisitando-la-tierra-frecuencia-y-volumen-de-datos-en-sentinel-2" title="Link to this heading">#</a></h2>
<p>Sentinel 2 no solo es poderosa por la cantidad de bandas que captura‚Ä¶
Lo verdaderamente extraordinario es su capacidad para volver a mirar, una y otra vez, el mismo lugar del planeta con una frecuencia dif√≠cil de igualar.
Durante a√±os, esta misi√≥n estuvo compuesta por dos sat√©lites gemelos: Sentinel 2A y Sentinel 2B, operando en la misma √≥rbita para cubrir la superficie terrestre con alta frecuencia. Pero en septiembre de 2024 se produjo un hito importante: el lanzamiento de Sentinel 2C, desde la Guayana Francesa a bordo del √∫ltimo cohete Vega de la Agencia Espacial Europea.
Aunque Sentinel 2C fue dise√±ado como sat√©lite de reemplazo, durante una etapa transitoria en 2025, los tres sat√©lites estuvieron operativos de forma simult√°nea, lo que llev√≥ la frecuencia de revisita a niveles in√©ditos. En ciertas regiones, ahora es posible observar un mismo punto del territorio con apenas uno o dos d√≠as de diferencia entre capturas. Y eso, para quienes trabajamos con an√°lisis multitemporal, es una oportunidad invaluable.
Este ritmo sostenido de adquisici√≥n nos permite construir series temporales detalladas: ver c√≥mo se expande una ciudad, c√≥mo reverdece un bosque tras un incendio, c√≥mo evoluciona un cultivo o c√≥mo fluct√∫an los cuerpos de agua. Pero claro‚Ä¶ semejante constancia tiene un precio. No econ√≥mico, sino informativo.
La constancia genera volumen. Mucho volumen.
Cada sat√©lite Sentinel 2 recolecta y transmite m√°s de 1.5 terabytes de datos por d√≠a, por lo que la constelaci√≥n ‚Äîen esta fase de tres sat√©lites activos‚Äî puede generar m√°s de 4.5 terabytes diarios. A lo largo del a√±o, esto representa m√°s de 1.6 petabytes de nuevas im√°genes satelitales.
Hasta mediados de 2025, el archivo acumulado de la misi√≥n supera los 30 petabytes. Un oc√©ano de informaci√≥n geoespacial, que incluye productos de nivel 1C (ortorrectificados, en top-of-atmosphere) y nivel 2A (corregidos atmosf√©ricamente, en bottom-of-atmosphere).
Y lo mejor de todo es que esta informaci√≥n no est√° bajo llave.</p>
<p>La Agencia Espacial Europea, a trav√©s del programa Copernicus, ha impulsado una pol√≠tica de ciencia abierta sin precedentes. Los datos de Sentinel 2 est√°n disponibles para todo el mundo en repositorios como el Copernicus Data Space Ecosystem o el CEDA del Reino Unido, que ya superan los 34 petabytes de informaci√≥n de Observaci√≥n de la Tierra, creciendo cada d√≠a en varios terabytes.
Este compromiso con la transparencia, el acceso libre y el desarrollo global de capacidades anal√≠ticas nos plantea un desaf√≠o apasionante:
Con tanto conocimiento disponible desde el espacio.
¬øEstamos preparados para sacarle el m√°ximo provecho?
¬øC√≥mo organizamos toda esta informaci√≥n?</p>
<blockquote>
<div><p>¬°Bienvenidos al mundo de los cubos de datos, o datacubes!</p>
</div></blockquote>
<p>El volumen y la complejidad de los datos satelitales nos obliga a pensar de una forma nueva. ¬øC√≥mo podemos analizar millones de im√°genes, cada una con m√∫ltiples bandas y fechas distintas, sin ahogarnos en un mar de archivos?
Aqu√≠ entra en juego un concepto clave en el an√°lisis geoespacial moderno: el cubo de dato o ingl√©s datacube d√°daciubs</p>
<p><img alt="" src="_images/PlacaJ.png" /></p>
<p>Seg√∫n la plataforma abierta para la observaci√≥n de la Tierra openEO:
‚ÄúUn cubo de datos es una estructura de datos multidimensional que organiza la informaci√≥n, generalmente geoespacial, en ejes bien definidos como espacio, tiempo, bandas espectrales, etc.‚Äù</p>
<p><img alt="" src="_images/PlacaL.png" /></p>
<p>Y seg√∫n Giuliani et al. (2016):
‚ÄúEs una colecci√≥n de datos geoespaciales organizados como una matriz multidimensional regular, dise√±ada para facilitar el acceso, consulta y an√°lisis en tiempo real de grandes vol√∫menes de informaci√≥n.‚Äù
En otras palabras, un cubo de datos no es solo un almacenamiento de im√°genes, sino una forma ordenada e inteligente de organizarlas para que podamos filtrar, combinar, analizar y visualizar los datos de manera eficiente.</p>
<p><img alt="" src="_images/PlacaM.png" /></p>
<p>¬øY cu√°les son sus dimensiones? Las principales son:</p>
<ul class="simple">
<li><p>Espacio: definido por las coordenadas x e y, donde x representa la longitud (el eje horizontal, de oeste a este) y y representa la latitud (el eje vertical, de sur a norte). Estas dos dimensiones permiten ubicar cada p√≠xel en la superficie terrestre.</p></li>
<li><p>Tiempo: corresponde al momento en que fue adquirida cada imagen, ya sea una fecha o una hora espec√≠fica. Esta dimensi√≥n es clave para el an√°lisis de cambios en el territorio.</p></li>
<li><p>Espectro: se refiere a las bandas espectrales que capturan diferentes rangos del espectro electromagn√©tico, como el visible, el infrarrojo cercano o el SWIR, lo que permite observar fen√≥menos que no son visibles a simple vista.</p></li>
<li><p>Y, en algunos casos, tambi√©n la geometr√≠a o incluso el sistema de referencia espacial (CRS) como una dimensi√≥n adicional.</p></li>
</ul>
<p>Esto nos permite hacer operaciones sofisticadas sin necesidad de reestructurar los datos. Por ejemplo:</p>
<ul class="simple">
<li><p>Filtrar el cubo por fechas, bandas o regi√≥n.</p></li>
<li><p>Aplicar funciones matem√°ticas sobre cada p√≠xel o grupo de p√≠xeles.</p></li>
<li><p>Calcular promedios temporales, m√°ximos espectrales, o derivar √≠ndices como NDVI o NDBI.</p></li>
<li><p>Remuestrear los datos a resoluciones espaciales o temporales diferentes.</p></li>
<li><p>Y realizar agregaciones estad√≠sticas por regiones geogr√°ficas, como cuencas, provincias o √°reas de cultivo.</p></li>
</ul>
<p><img alt="" src="_images/PlacaN.png" /></p>
<p>Un cubo de datos puede ser raster, cuando trabaja con pixeles organizados en grillas, o vectorial, cuando se organiza por geometr√≠as como pol√≠gonos o puntos.</p>
</section>
<section id="aplicaciones-reales-y-cierre">
<h2><span class="section-number">7.4. </span>Aplicaciones reales y cierre<a class="headerlink" href="#aplicaciones-reales-y-cierre" title="Link to this heading">#</a></h2>
<p>Gracias a los cubos de datos, hoy es posible:</p>
<ul class="simple">
<li><p>Analizar la evoluci√≥n mensual del NDVI en una regi√≥n agr√≠cola.</p></li>
<li><p>Detectar patrones de urbanizaci√≥n usando √≠ndices como NDBI.</p></li>
<li><p>Entrenar modelos de machine learning sobre cubos multitemporales.</p></li>
<li><p>Crear tableros interactivos para monitorear el ambiente a gran escala.</p></li>
</ul>
<p><img alt="" src="_images/PlacaP.png" /></p>
<p>En definitiva, los cubos de datos no son solo una forma eficiente de almacenar informaci√≥n, sino una herramienta poderosa para transformar datos satelitales en conocimiento accionable.
Comprender c√≥mo se estructuran, c√≥mo se consultan y c√≥mo se transforman es clave para aprovechar todo el potencial de los datos de observaci√≥n de la Tierra.</p>
</section>
<section id="datacube-de-temperatura-superficial-en-bahia-blanca-con-gee">
<h2><span class="section-number">7.5. </span>Datacube de temperatura superficial en Bah√≠a Blanca con GEE<a class="headerlink" href="#datacube-de-temperatura-superficial-en-bahia-blanca-con-gee" title="Link to this heading">#</a></h2>
<p>En este laboratorio vamos a construir y analizar un datacube de temperatura superficial terrestre (LST) para la regi√≥n de Bah√≠a Blanca, usando im√°genes satelitales MODIS desde Google Earth Engine.
Veremos c√≥mo generar mapas mensuales de temperatura, c√≥mo calcular promedios sobre toda el √°rea y c√≥mo exportar esta informaci√≥n para estudios m√°s avanzados.
Lo m√°s importante: vamos a entender c√≥mo este proceso representa un claro ejemplo del uso de cubo de datos geoespacial.</p>
<section id="paso-1-definir-la-region-de-interes">
<h3><span class="section-number">7.5.1. </span>Paso 1: Definir la regi√≥n de inter√©s<a class="headerlink" href="#paso-1-definir-la-region-de-interes" title="Link to this heading">#</a></h3>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">admin2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ee</span><span class="p">.</span><span class="nx">FeatureCollection</span><span class="p">(</span><span class="s2">&quot;FAO/GAUL/2015/level2&quot;</span><span class="p">)</span>
<span class="w">  </span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">ee</span><span class="p">.</span><span class="nx">Filter</span><span class="p">.</span><span class="nx">eq</span><span class="p">(</span><span class="s1">&#39;ADM0_NAME&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Argentina&#39;</span><span class="p">))</span>
<span class="w">  </span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">ee</span><span class="p">.</span><span class="nx">Filter</span><span class="p">.</span><span class="nx">eq</span><span class="p">(</span><span class="s1">&#39;ADM1_NAME&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Buenos Aires&#39;</span><span class="p">));</span>
<span class="kd">var</span><span class="w"> </span><span class="nx">bahiaBlanca</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">admin2</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">ee</span><span class="p">.</span><span class="nx">Filter</span><span class="p">.</span><span class="nx">eq</span><span class="p">(</span><span class="s1">&#39;ADM2_NAME&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Bahia Blanca&#39;</span><span class="p">));</span>
<span class="kd">var</span><span class="w"> </span><span class="nx">roi2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">bahiaBlanca</span><span class="p">.</span><span class="nx">geometry</span><span class="p">().</span><span class="nx">simplify</span><span class="p">(</span><span class="mf">100</span><span class="p">);</span>
</pre></div>
</div>
<p>Comenzamos seleccionando la regi√≥n administrativa de Bah√≠a Blanca desde el cat√°logo GAUL de la FAO.
El resultado es un pol√≠gono que define el recorte espacial de nuestro cubo de datos.</p>
</section>
<section id="paso-2-seleccion-temporal">
<h3><span class="section-number">7.5.2. </span>Paso 2: Selecci√≥n temporal<a class="headerlink" href="#paso-2-seleccion-temporal" title="Link to this heading">#</a></h3>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">fechaInicio</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ee</span><span class="p">.</span><span class="nb">Date</span><span class="p">(</span><span class="s1">&#39;2024-01-01&#39;</span><span class="p">);</span>
<span class="kd">var</span><span class="w"> </span><span class="nx">fechaFin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ee</span><span class="p">.</span><span class="nb">Date</span><span class="p">(</span><span class="s1">&#39;2025-08-01&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>Aqu√≠ definimos el recorte temporal del datacube. Estamos solicitando 20 meses consecutivos de datos, desde enero de 2024 hasta agosto de 2025.</p>
</section>
<section id="paso-3-cargar-modis-lst-y-convertir-unidades">
<h3><span class="section-number">7.5.3. </span>Paso 3: Cargar MODIS LST y convertir unidades<a class="headerlink" href="#paso-3-cargar-modis-lst-y-convertir-unidades" title="Link to this heading">#</a></h3>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">modisLST</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ee</span><span class="p">.</span><span class="nx">ImageCollection</span><span class="p">(</span><span class="s2">&quot;MODIS/061/MOD11A2&quot;</span><span class="p">)</span>
<span class="w">  </span><span class="p">.</span><span class="nx">filterBounds</span><span class="p">(</span><span class="nx">roi2</span><span class="p">)</span>
<span class="w">  </span><span class="p">.</span><span class="nx">filterDate</span><span class="p">(</span><span class="nx">fechaInicio</span><span class="p">,</span><span class="w"> </span><span class="nx">fechaFin</span><span class="p">)</span>
<span class="w">  </span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">img</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nx">lst</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">img</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s1">&#39;LST_Day_1km&#39;</span><span class="p">)</span>
<span class="w">      </span><span class="p">.</span><span class="nx">multiply</span><span class="p">(</span><span class="mf">0.02</span><span class="p">)</span>
<span class="w">      </span><span class="p">.</span><span class="nx">subtract</span><span class="p">(</span><span class="mf">273.15</span><span class="p">)</span>
<span class="w">      </span><span class="p">.</span><span class="nx">rename</span><span class="p">(</span><span class="s1">&#39;LST&#39;</span><span class="p">)</span>
<span class="w">      </span><span class="p">.</span><span class="nx">clip</span><span class="p">(</span><span class="nx">roi2</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">lst</span><span class="p">.</span><span class="nx">copyProperties</span><span class="p">(</span><span class="nx">img</span><span class="p">,</span><span class="w"> </span><span class="nx">img</span><span class="p">.</span><span class="nx">propertyNames</span><span class="p">());</span>
<span class="w">  </span><span class="p">});</span>
</pre></div>
</div>
<p>El sat√©lite MODIS entrega datos de temperatura superficial terrestre (LST) cada 8 d√≠as.</p>
<p>Este bloque:</p>
<ul class="simple">
<li><p>Filtra im√°genes dentro del ROI y del rango temporal.</p></li>
<li><p>Convierte los valores de Kelvin a Celsius.</p></li>
<li><p>Recorta cada imagen al √°rea de Bah√≠a Blanca.</p></li>
</ul>
<p>Lo que estamos construyendo es un cubo de datos con tres dimensiones:</p>
<ul class="simple">
<li><p>X e Y: espacio (p√≠xeles)</p></li>
<li><p>T: tiempo (una imagen promedio por mes)</p></li>
</ul>
</section>
<section id="paso-4-parametros-visuales-para-el-mapa">
<h3><span class="section-number">7.5.4. </span>Paso 4: Par√°metros visuales para el mapa<a class="headerlink" href="#paso-4-parametros-visuales-para-el-mapa" title="Link to this heading">#</a></h3>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">visParams</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">min</span><span class="o">:</span><span class="w"> </span><span class="mf">10</span><span class="p">,</span>
<span class="w">  </span><span class="nx">max</span><span class="o">:</span><span class="w"> </span><span class="mf">45</span><span class="p">,</span>
<span class="w">  </span><span class="nx">palette</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;blue&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;cyan&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;green&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;yellow&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;orange&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;red&#39;</span><span class="p">]</span>
<span class="p">};</span>
</pre></div>
</div>
<p>Configuramos una paleta de colores que ir√° de azul a rojo, resaltando las diferencias t√©rmicas. Este rango se adapta a temperaturas comunes en superficie terrestre.</p>
</section>
<section id="paso-5-y-6-generar-imagenes-mensuales-y-mostrarlas-en-el-mapa">
<h3><span class="section-number">7.5.5. </span>Paso 5 y 6: Generar im√°genes mensuales y mostrarlas en el mapa<a class="headerlink" href="#paso-5-y-6-generar-imagenes-mensuales-y-mostrarlas-en-el-mapa" title="Link to this heading">#</a></h3>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">meses</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ee</span><span class="p">.</span><span class="nx">List</span><span class="p">.</span><span class="nx">sequence</span><span class="p">(</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="nx">fechaFin</span><span class="p">.</span><span class="nx">difference</span><span class="p">(</span><span class="nx">fechaInicio</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;month&#39;</span><span class="p">).</span><span class="nx">subtract</span><span class="p">(</span><span class="mf">1</span><span class="p">));</span>
<span class="kd">var</span><span class="w"> </span><span class="nx">fechasStr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">meses</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">m</span><span class="p">){</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nx">fechaInicio</span><span class="p">.</span><span class="nx">advance</span><span class="p">(</span><span class="nx">m</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;month&#39;</span><span class="p">).</span><span class="nx">format</span><span class="p">(</span><span class="s1">&#39;YYYY-MM&#39;</span><span class="p">);</span>
<span class="p">});</span>
<span class="nx">Esta</span><span class="w"> </span><span class="nx">lista</span><span class="w"> </span><span class="nx">representa</span><span class="w"> </span><span class="nx">la</span><span class="w"> </span><span class="nx">dimensi√≥n</span><span class="w"> </span><span class="nx">temporal</span><span class="w"> </span><span class="nx">del</span><span class="w"> </span><span class="nx">cubo</span><span class="p">.</span><span class="w"> </span><span class="nx">Luego</span><span class="o">:</span>
<span class="w"> </span>
<span class="w">  </span>
<span class="nx">fechasStr</span><span class="p">.</span><span class="nx">evaluate</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">listaFechas</span><span class="p">){</span>
<span class="w">  </span><span class="nx">listaFechas</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">fechaStr</span><span class="p">){</span>
<span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nx">start</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ee</span><span class="p">.</span><span class="nb">Date</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s1">&#39;YYYY-MM&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">fechaStr</span><span class="p">);</span>
<span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nx">end</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">start</span><span class="p">.</span><span class="nx">advance</span><span class="p">(</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;month&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nx">img</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">modisLST</span><span class="p">.</span><span class="nx">filterDate</span><span class="p">(</span><span class="nx">start</span><span class="p">,</span><span class="w"> </span><span class="nx">end</span><span class="p">).</span><span class="nx">mean</span><span class="p">();</span>
<span class="w">    </span><span class="nb">Map</span><span class="p">.</span><span class="nx">addLayer</span><span class="p">(</span><span class="nx">img</span><span class="p">.</span><span class="nx">clip</span><span class="p">(</span><span class="nx">roi2</span><span class="p">),</span><span class="w"> </span><span class="nx">visParams</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;LST &#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">fechaStr</span><span class="p">);</span>
<span class="w">  </span><span class="p">});</span>
<span class="p">});</span>
</pre></div>
</div>
<p>Calculamos y mostramos una imagen mensual promedio para cada mes del per√≠odo.
Estas im√°genes conforman la dimensi√≥n espacial + temporal del cubo de temperatura.</p>
</section>
<section id="paso-7-crear-tabla-de-promedios-mensuales-reduccion-espacial">
<h3><span class="section-number">7.5.6. </span>Paso 7: Crear tabla de promedios mensuales (reducci√≥n espacial)<a class="headerlink" href="#paso-7-crear-tabla-de-promedios-mensuales-reduccion-espacial" title="Link to this heading">#</a></h3>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">tablaMensual</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ee</span><span class="p">.</span><span class="nx">FeatureCollection</span><span class="p">(</span><span class="nx">meses</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">m</span><span class="p">){</span>
<span class="w">  </span><span class="kd">var</span><span class="w"> </span><span class="nx">inicioMes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">fechaInicio</span><span class="p">.</span><span class="nx">advance</span><span class="p">(</span><span class="nx">m</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;month&#39;</span><span class="p">);</span>
<span class="w">  </span><span class="kd">var</span><span class="w"> </span><span class="nx">finMes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">inicioMes</span><span class="p">.</span><span class="nx">advance</span><span class="p">(</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;month&#39;</span><span class="p">);</span>

<span class="w">  </span><span class="kd">var</span><span class="w"> </span><span class="nx">media</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">modisLST</span>
<span class="w">    </span><span class="p">.</span><span class="nx">filterDate</span><span class="p">(</span><span class="nx">inicioMes</span><span class="p">,</span><span class="w"> </span><span class="nx">finMes</span><span class="p">)</span>
<span class="w">    </span><span class="p">.</span><span class="nx">mean</span><span class="p">()</span>
<span class="w">    </span><span class="p">.</span><span class="nx">reduceRegion</span><span class="p">({</span>
<span class="w">      </span><span class="nx">reducer</span><span class="o">:</span><span class="w"> </span><span class="nx">ee</span><span class="p">.</span><span class="nx">Reducer</span><span class="p">.</span><span class="nx">mean</span><span class="p">(),</span>
<span class="w">      </span><span class="nx">geometry</span><span class="o">:</span><span class="w"> </span><span class="nx">roi2</span><span class="p">,</span>
<span class="w">      </span><span class="nx">scale</span><span class="o">:</span><span class="w"> </span><span class="mf">1000</span><span class="p">,</span>
<span class="w">      </span><span class="nx">maxPixels</span><span class="o">:</span><span class="w"> </span><span class="mf">1e9</span>
<span class="w">    </span><span class="p">}).</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;LST&#39;</span><span class="p">);</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nx">ee</span><span class="p">.</span><span class="nx">Feature</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">fecha</span><span class="o">:</span><span class="w"> </span><span class="nx">inicioMes</span><span class="p">.</span><span class="nx">format</span><span class="p">(</span><span class="s1">&#39;YYYY-MM&#39;</span><span class="p">),</span>
<span class="w">    </span><span class="nx">temperatura_celsius</span><span class="o">:</span><span class="w"> </span><span class="nx">media</span>
<span class="w">  </span><span class="p">});</span>
<span class="p">}));</span>
</pre></div>
</div>
<p>Aqu√≠ aplicamos una reducci√≥n espacial sobre cada mes. Para cada imagen mensual, calculamos el promedio de temperatura sobre todo el pol√≠gono de Bah√≠a Blanca.
El resultado es una tabla de 20 filas, cada una representando un mes.</p>
<p>Ejemplo:</p>
<p>Feature 14
fecha: 2025-03
temperatura_celsius: 19.49</p>
<p>Este valor corresponde al promedio de temperatura superficial en marzo de 2025, cuando se registraron eventos de inundaci√≥n en la regi√≥n. Esta cifra es √∫til para estudiar el comportamiento t√©rmico durante ese evento extremo.</p>
</section>
<section id="paso-8-visualizar-la-serie-de-tiempo">
<h3><span class="section-number">7.5.7. </span>Paso 8: Visualizar la serie de tiempo<a class="headerlink" href="#paso-8-visualizar-la-serie-de-tiempo" title="Link to this heading">#</a></h3>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="w"> </span>
<span class="kd">var</span><span class="w"> </span><span class="nx">chart</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ui</span><span class="p">.</span><span class="nx">Chart</span><span class="p">.</span><span class="nx">feature</span><span class="p">.</span><span class="nx">byFeature</span><span class="p">(</span><span class="nx">tablaMensual</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;fecha&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;temperatura_celsius&#39;</span><span class="p">)</span>
<span class="w">  </span><span class="p">.</span><span class="nx">setChartType</span><span class="p">(</span><span class="s1">&#39;LineChart&#39;</span><span class="p">)</span>
<span class="w">  </span><span class="p">.</span><span class="nx">setOptions</span><span class="p">({</span>
<span class="w">    </span><span class="nx">title</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Temperatura superficial promedio mensual - Bah√≠a Blanca&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">hAxis</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">title</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Mes&#39;</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="nx">vAxis</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">title</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;¬∞C&#39;</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="nx">lineWidth</span><span class="o">:</span><span class="w"> </span><span class="mf">2</span><span class="p">,</span>
<span class="w">    </span><span class="nx">pointSize</span><span class="o">:</span><span class="w"> </span><span class="mf">4</span><span class="p">,</span>
<span class="w">    </span><span class="nx">colors</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;red&#39;</span><span class="p">]</span>
<span class="w">  </span><span class="p">});</span>

<span class="nx">print</span><span class="p">(</span><span class="s1">&#39;Serie mensual de LST:&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">tablaMensual</span><span class="p">);</span>
<span class="nx">print</span><span class="p">(</span><span class="nx">chart</span><span class="p">);</span>
</pre></div>
</div>
<p>En consola se imprimen dos elementos:</p>
<ul class="simple">
<li><p>Una tabla con los valores mensuales.</p></li>
<li><p>Un gr√°fico de l√≠neas que permite visualizar tendencias, oscilaciones t√©rmicas y meses extremos.</p></li>
</ul>
</section>
<section id="paso-9-estetica-del-mapa">
<h3><span class="section-number">7.5.8. </span>Paso 9: Est√©tica del mapa<a class="headerlink" href="#paso-9-estetica-del-mapa" title="Link to this heading">#</a></h3>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nb">Map</span><span class="p">.</span><span class="nx">centerObject</span><span class="p">(</span><span class="nx">roi2</span><span class="p">,</span><span class="w"> </span><span class="mf">8</span><span class="p">);</span>
<span class="nb">Map</span><span class="p">.</span><span class="nx">setOptions</span><span class="p">(</span><span class="s1">&#39;SATELLITE&#39;</span><span class="p">);</span>
<span class="nb">Map</span><span class="p">.</span><span class="nx">addLayer</span><span class="p">(</span><span class="nx">bahiaBlanca</span><span class="p">.</span><span class="nx">style</span><span class="p">({</span>
<span class="w">  </span><span class="nx">color</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;black&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="nx">fillColor</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;00000000&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="nx">width</span><span class="o">:</span><span class="w"> </span><span class="mf">2</span>
<span class="p">}),</span><span class="w"> </span><span class="p">{},</span><span class="w"> </span><span class="s1">&#39;L√≠mite Bah√≠a Blanca&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>Agregamos una capa de contorno para la regi√≥n, usando un estilo transparente y bordes negros, para que los mapas mensuales se vean claramente.</p>
</section>
<section id="paso-10-exportar-la-serie-al-drive">
<h3><span class="section-number">7.5.9. </span>Paso 10: Exportar la serie al Drive<a class="headerlink" href="#paso-10-exportar-la-serie-al-drive" title="Link to this heading">#</a></h3>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">Export</span><span class="p">.</span><span class="nx">table</span><span class="p">.</span><span class="nx">toDrive</span><span class="p">({</span>
<span class="w">  </span><span class="nx">collection</span><span class="o">:</span><span class="w"> </span><span class="nx">tablaMensual</span><span class="p">,</span>
<span class="w">  </span><span class="nx">description</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;serie_LST_BahiaBlanca&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="nx">fileFormat</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;CSV&#39;</span>
<span class="p">});</span>
</pre></div>
</div>
<p>Finalmente, exportamos los datos mensuales de temperatura como un archivo .CSV.
Este archivo ser√° utilizado luego en Python, para aplicar modelos de an√°lisis de tendencia y estacionalidad, completando as√≠ el ciclo de an√°lisis del datacube.</p>
</section>
</section>
<section id="conclusion-de-esta-seccion">
<h2><span class="section-number">7.6. </span>Conclusi√≥n de esta secci√≥n<a class="headerlink" href="#conclusion-de-esta-seccion" title="Link to this heading">#</a></h2>
<p>En resumen:</p>
<ul class="simple">
<li><p>Hemos construido un datacube geoespacial tridimensional (X, Y, T) a partir de datos satelitales MODIS.</p></li>
<li><p>Derivamos productos de este cubo: mapas mensuales y series temporales.</p></li>
<li><p>Extraemos conocimiento para analizar eventos clim√°ticos, como el caso de marzo de 2025.</p></li>
</ul>
<p>Este ejemplo muestra c√≥mo GEE permite integrar observaci√≥n satelital, c√°lculo estad√≠stico y visualizaci√≥n, con un enfoque moderno y escalable para el an√°lisis de fen√≥menos ambientales.</p>
</section>
<section id="visualizacion-y-analisis-de-un-datacube-de-precipitacion-mensual-en-bahia-blanca-chirps">
<h2><span class="section-number">7.7. </span>Visualizaci√≥n y an√°lisis de un datacube de precipitaci√≥n mensual en Bah√≠a Blanca (CHIRPS)<a class="headerlink" href="#visualizacion-y-analisis-de-un-datacube-de-precipitacion-mensual-en-bahia-blanca-chirps" title="Link to this heading">#</a></h2>
<p>En este ejercicio analizamos la precipitaci√≥n mensual en el partido de Bah√≠a Blanca, utilizando la colecci√≥n satelital CHIRPS Daily en Google Earth Engine. La idea principal es construir un datacube espacio-temporal de precipitaci√≥n para luego visualizar sus capas mensuales, graficar su evoluci√≥n a lo largo del tiempo y finalmente exportar sus estad√≠sticas.</p>
</section>
<section id="que-es-chirps">
<h2><span class="section-number">7.8. </span>¬øQu√© es CHIRPS?<a class="headerlink" href="#que-es-chirps" title="Link to this heading">#</a></h2>
<p>CHIRPS (Climate Hazards Group InfraRed Precipitation with Station data) es un producto de precipitaci√≥n global que combina observaciones satelitales infrarrojas con datos de estaciones meteorol√≥gicas. Est√° disponible a resoluci√≥n diaria desde 1981, con una malla espacial de aproximadamente 5 km.
Es muy utilizado para estudios hidrol√≥gicos, agr√≠colas y clim√°ticos en todo el mundo, gracias a su cobertura consistente y su accesibilidad.</p>
<p>¬øCu√°l es el datacube en este ejemplo?</p>
<p>En este caso, el datacube es una colecci√≥n tridimensional de datos, estructurado seg√∫n:</p>
<ul class="simple">
<li><p>Espacio (x, y): el √°rea geogr√°fica de Bah√≠a Blanca</p></li>
<li><p>Tiempo: una capa por cada mes</p></li>
<li><p>Variable: precipitaci√≥n promedio en mil√≠metros</p></li>
</ul>
<p>Este cubo de datos nos permite realizar consultas espaciales (¬ød√≥nde llovi√≥ m√°s en marzo?) y temporales (¬øc√≥mo vari√≥ la lluvia durante el a√±o?), de forma conjunta.</p>
</section>
<section id="seleccion-de-la-region-bahia-blanca">
<h2><span class="section-number">7.9. </span>Selecci√≥n de la regi√≥n: Bah√≠a Blanca<a class="headerlink" href="#seleccion-de-la-region-bahia-blanca" title="Link to this heading">#</a></h2>
<p>Utilizamos la colecci√≥n GAUL de la FAO para recortar el √°rea de inter√©s:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">admin2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ee</span><span class="p">.</span><span class="nx">FeatureCollection</span><span class="p">(</span><span class="s2">&quot;FAO/GAUL/2015/level2&quot;</span><span class="p">)</span>
<span class="w">  </span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">ee</span><span class="p">.</span><span class="nx">Filter</span><span class="p">.</span><span class="nx">eq</span><span class="p">(</span><span class="s1">&#39;ADM0_NAME&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Argentina&#39;</span><span class="p">))</span>
<span class="w">  </span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">ee</span><span class="p">.</span><span class="nx">Filter</span><span class="p">.</span><span class="nx">eq</span><span class="p">(</span><span class="s1">&#39;ADM1_NAME&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Buenos Aires&#39;</span><span class="p">));</span>

<span class="kd">var</span><span class="w"> </span><span class="nx">bahiaBlanca</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">admin2</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">ee</span><span class="p">.</span><span class="nx">Filter</span><span class="p">.</span><span class="nx">eq</span><span class="p">(</span><span class="s1">&#39;ADM2_NAME&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Bahia Blanca&#39;</span><span class="p">));</span>
<span class="kd">var</span><span class="w"> </span><span class="nx">roi2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">bahiaBlanca</span><span class="p">.</span><span class="nx">geometry</span><span class="p">().</span><span class="nx">simplify</span><span class="p">(</span><span class="mf">100</span><span class="p">);</span><span class="w">  </span><span class="c1">// recorte suave</span>
</pre></div>
</div>
<section id="definimos-el-periodo-de-analisis">
<h3><span class="section-number">7.9.1. </span>Definimos el per√≠odo de an√°lisis<a class="headerlink" href="#definimos-el-periodo-de-analisis" title="Link to this heading">#</a></h3>
<p>El estudio abarca desde enero de 2024 hasta agosto de 2025:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">fechaInicio</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ee</span><span class="p">.</span><span class="nb">Date</span><span class="p">(</span><span class="s1">&#39;2024-01-01&#39;</span><span class="p">);</span>
<span class="kd">var</span><span class="w"> </span><span class="nx">fechaFin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ee</span><span class="p">.</span><span class="nb">Date</span><span class="p">(</span><span class="s1">&#39;2025-08-01&#39;</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="cargamos-la-coleccion-chirps-diaria">
<h3><span class="section-number">7.9.2. </span>Cargamos la colecci√≥n CHIRPS diaria<a class="headerlink" href="#cargamos-la-coleccion-chirps-diaria" title="Link to this heading">#</a></h3>
<p>Filtramos espacial y temporalmente para solo conservar datos sobre nuestra regi√≥n:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="w"> </span>
<span class="kd">var</span><span class="w"> </span><span class="nx">chirps</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ee</span><span class="p">.</span><span class="nx">ImageCollection</span><span class="p">(</span><span class="s1">&#39;UCSB-CHG/CHIRPS/DAILY&#39;</span><span class="p">)</span>
<span class="w">  </span><span class="p">.</span><span class="nx">filterBounds</span><span class="p">(</span><span class="nx">roi2</span><span class="p">)</span>
<span class="w">  </span><span class="p">.</span><span class="nx">filterDate</span><span class="p">(</span><span class="nx">fechaInicio</span><span class="p">,</span><span class="w"> </span><span class="nx">fechaFin</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="paleta-de-colores-para-visualizacion">
<h3><span class="section-number">7.9.3. </span>Paleta de colores para visualizaci√≥n<a class="headerlink" href="#paleta-de-colores-para-visualizacion" title="Link to this heading">#</a></h3>
<p>Configuramos una escala crom√°tica que distingue mejor las zonas con mayor o menor precipitaci√≥n:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">visParams</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">min</span><span class="o">:</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span>
<span class="w">  </span><span class="nx">max</span><span class="o">:</span><span class="w"> </span><span class="mf">9</span><span class="p">,</span>
<span class="w">  </span><span class="nx">palette</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;#f7fbff&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;#deebf7&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;#9ecae1&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;#3182bd&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;#08519c&#39;</span><span class="p">]</span>
<span class="p">};</span>
</pre></div>
</div>
</section>
<section id="visualizamos-cada-capa-mensual-del-datacube">
<h3><span class="section-number">7.9.4. </span>Visualizamos cada capa mensual del datacube<a class="headerlink" href="#visualizamos-cada-capa-mensual-del-datacube" title="Link to this heading">#</a></h3>
<p>Creamos capas mensuales promediando la precipitaci√≥n diaria por mes. Cada capa se muestra en el mapa:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">meses</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ee</span><span class="p">.</span><span class="nx">List</span><span class="p">.</span><span class="nx">sequence</span><span class="p">(</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="nx">fechaFin</span><span class="p">.</span><span class="nx">difference</span><span class="p">(</span><span class="nx">fechaInicio</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;month&#39;</span><span class="p">).</span><span class="nx">subtract</span><span class="p">(</span><span class="mf">1</span><span class="p">));</span>
<span class="kd">var</span><span class="w"> </span><span class="nx">fechasStr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">meses</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">m</span><span class="p">){</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nx">fechaInicio</span><span class="p">.</span><span class="nx">advance</span><span class="p">(</span><span class="nx">m</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;month&#39;</span><span class="p">).</span><span class="nx">format</span><span class="p">(</span><span class="s1">&#39;YYYY-MM&#39;</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">fechasStr</span><span class="p">.</span><span class="nx">evaluate</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">listaFechas</span><span class="p">){</span>
<span class="w">  </span><span class="nx">listaFechas</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">fechaStr</span><span class="p">){</span>
<span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nx">start</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ee</span><span class="p">.</span><span class="nb">Date</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s1">&#39;YYYY-MM&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">fechaStr</span><span class="p">);</span>
<span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nx">end</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">start</span><span class="p">.</span><span class="nx">advance</span><span class="p">(</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;month&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nx">img</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">chirps</span><span class="p">.</span><span class="nx">filterDate</span><span class="p">(</span><span class="nx">start</span><span class="p">,</span><span class="w"> </span><span class="nx">end</span><span class="p">).</span><span class="nx">mean</span><span class="p">();</span>
<span class="w">    </span><span class="nb">Map</span><span class="p">.</span><span class="nx">addLayer</span><span class="p">(</span><span class="nx">img</span><span class="p">.</span><span class="nx">clip</span><span class="p">(</span><span class="nx">roi2</span><span class="p">),</span><span class="w"> </span><span class="nx">visParams</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;CHIRPS &#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">fechaStr</span><span class="p">);</span>
<span class="w">  </span><span class="p">});</span>
<span class="p">});</span>
</pre></div>
</div>
<p>En el mapa, se agregan capas con nombres como CHIRPS 2024-01, CHIRPS 2025-03, etc. Estas capas muestran con distintos tonos de azul la distribuci√≥n espacial de la lluvia mensual sobre Bah√≠a Blanca.</p>
</section>
<section id="calculo-de-la-serie-temporal-mensual-promedio">
<h3><span class="section-number">7.9.5. </span>C√°lculo de la serie temporal mensual promedio<a class="headerlink" href="#calculo-de-la-serie-temporal-mensual-promedio" title="Link to this heading">#</a></h3>
<p>Calculamos el promedio mensual de precipitaci√≥n para todo Bah√≠a Blanca, generando una tabla que representa la evoluci√≥n temporal:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="w">  </span>
<span class="kd">var</span><span class="w"> </span><span class="nx">tablaMensual</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ee</span><span class="p">.</span><span class="nx">FeatureCollection</span><span class="p">(</span><span class="nx">meses</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">m</span><span class="p">){</span>
<span class="w">  </span><span class="kd">var</span><span class="w"> </span><span class="nx">inicioMes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">fechaInicio</span><span class="p">.</span><span class="nx">advance</span><span class="p">(</span><span class="nx">m</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;month&#39;</span><span class="p">);</span>
<span class="w">  </span><span class="kd">var</span><span class="w"> </span><span class="nx">finMes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">inicioMes</span><span class="p">.</span><span class="nx">advance</span><span class="p">(</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;month&#39;</span><span class="p">);</span>
<span class="w">  </span>
<span class="w">  </span><span class="kd">var</span><span class="w"> </span><span class="nx">media</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">chirps</span>
<span class="w">    </span><span class="p">.</span><span class="nx">filterDate</span><span class="p">(</span><span class="nx">inicioMes</span><span class="p">,</span><span class="w"> </span><span class="nx">finMes</span><span class="p">)</span>
<span class="w">    </span><span class="p">.</span><span class="nx">mean</span><span class="p">()</span>
<span class="w">    </span><span class="p">.</span><span class="nx">reduceRegion</span><span class="p">({</span>
<span class="w">      </span><span class="nx">reducer</span><span class="o">:</span><span class="w"> </span><span class="nx">ee</span><span class="p">.</span><span class="nx">Reducer</span><span class="p">.</span><span class="nx">mean</span><span class="p">(),</span>
<span class="w">      </span><span class="nx">geometry</span><span class="o">:</span><span class="w"> </span><span class="nx">roi2</span><span class="p">,</span>
<span class="w">      </span><span class="nx">scale</span><span class="o">:</span><span class="w"> </span><span class="mf">5500</span><span class="p">,</span>
<span class="w">      </span><span class="nx">maxPixels</span><span class="o">:</span><span class="w"> </span><span class="mf">1e9</span>
<span class="w">    </span><span class="p">}).</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;precipitation&#39;</span><span class="p">);</span>
<span class="w">    </span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nx">ee</span><span class="p">.</span><span class="nx">Feature</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">fecha</span><span class="o">:</span><span class="w"> </span><span class="nx">inicioMes</span><span class="p">.</span><span class="nx">format</span><span class="p">(</span><span class="s1">&#39;YYYY-MM&#39;</span><span class="p">),</span>
<span class="w">    </span><span class="nx">precipitacion_mm</span><span class="o">:</span><span class="w"> </span><span class="nx">media</span>
<span class="w">  </span><span class="p">});</span>
<span class="p">}));</span>
</pre></div>
</div>
<p>Esta tabla representa el eje temporal del datacube, sintetizando cada capa mensual en un √∫nico valor promedio.</p>
</section>
<section id="grafico-de-barras-de-la-serie">
<h3><span class="section-number">7.9.6. </span>Gr√°fico de barras de la serie<a class="headerlink" href="#grafico-de-barras-de-la-serie" title="Link to this heading">#</a></h3>
<p>Se visualiza en consola una serie temporal que muestra c√≥mo evolucion√≥ la lluvia:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">chart</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ui</span><span class="p">.</span><span class="nx">Chart</span><span class="p">.</span><span class="nx">feature</span><span class="p">.</span><span class="nx">byFeature</span><span class="p">(</span><span class="nx">tablaMensual</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;fecha&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;precipitacion_mm&#39;</span><span class="p">)</span>
<span class="w">  </span><span class="p">.</span><span class="nx">setChartType</span><span class="p">(</span><span class="s1">&#39;ColumnChart&#39;</span><span class="p">)</span>
<span class="w">  </span><span class="p">.</span><span class="nx">setOptions</span><span class="p">({</span>
<span class="w">    </span><span class="nx">title</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Precipitaci√≥n mensual promedio - Bah√≠a Blanca&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">hAxis</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">title</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Mes&#39;</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="nx">vAxis</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">title</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Precipitaci√≥n (mm)&#39;</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="nx">legend</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">position</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;none&#39;</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="nx">colors</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;#1f78b4&#39;</span><span class="p">]</span>
<span class="w">  </span><span class="p">});</span>

<span class="nx">print</span><span class="p">(</span><span class="s1">&#39;Serie mensual:&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">tablaMensual</span><span class="p">);</span>
<span class="nx">print</span><span class="p">(</span><span class="nx">chart</span><span class="p">);</span>
</pre></div>
</div>
<p>En la consola, el gr√°fico permite detectar anomal√≠as clim√°ticas o estacionalidades.
Por ejemplo, en el mes de marzo de 2025, se registr√≥ un valor at√≠pico de 8.27 mm, que puede corresponder a un evento extremo como una DANA (Depresi√≥n Aislada en Niveles Altos).</p>
</section>
</section>
<section id="ejemplo-concreto-feature-14">
<h2><span class="section-number">7.10. </span>Ejemplo concreto: Feature 14<a class="headerlink" href="#ejemplo-concreto-feature-14" title="Link to this heading">#</a></h2>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">Feature</span><span class="w"> </span><span class="mf">14</span>
<span class="nx">type</span><span class="o">:</span><span class="w"> </span><span class="nx">Feature</span>
<span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="mf">14</span>
<span class="nx">geometry</span><span class="o">:</span><span class="w"> </span><span class="kc">null</span>
<span class="nx">properties</span><span class="o">:</span>
<span class="w">  </span><span class="nx">fecha</span><span class="o">:</span><span class="w"> </span><span class="mf">2025</span><span class="o">-</span><span class="mo">03</span>
<span class="w">  </span><span class="nx">precipitacion_mm</span><span class="o">:</span><span class="w"> </span><span class="mf">8.274471593871292</span>
</pre></div>
</div>
<p>Este objeto representa la capa del datacube correspondiente a marzo de 2025, donde se registr√≥ una precipitaci√≥n muy por encima del promedio. El valor fue calculado sobre toda el √°rea de Bah√≠a Blanca.</p>
<section id="mejora-estetica-del-mapa">
<h3><span class="section-number">7.10.1. </span>Mejora est√©tica del mapa<a class="headerlink" href="#mejora-estetica-del-mapa" title="Link to this heading">#</a></h3>
<p>Para facilitar la lectura visual, centramos el mapa, lo mostramos en fondo satelital y destacamos el contorno de Bah√≠a Blanca:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nb">Map</span><span class="p">.</span><span class="nx">centerObject</span><span class="p">(</span><span class="nx">roi2</span><span class="p">,</span><span class="w"> </span><span class="mf">8</span><span class="p">);</span>
<span class="nb">Map</span><span class="p">.</span><span class="nx">setOptions</span><span class="p">(</span><span class="s1">&#39;SATELLITE&#39;</span><span class="p">);</span>
<span class="nb">Map</span><span class="p">.</span><span class="nx">addLayer</span><span class="p">(</span><span class="nx">bahiaBlanca</span><span class="p">.</span><span class="nx">style</span><span class="p">({</span>
<span class="w">  </span><span class="nx">color</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;black&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="nx">fillColor</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;00000000&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="nx">width</span><span class="o">:</span><span class="w"> </span><span class="mf">2</span>
<span class="p">}),</span><span class="w"> </span><span class="p">{},</span><span class="w"> </span><span class="s1">&#39;L√≠mite Bah√≠a Blanca&#39;</span><span class="p">);</span>
</pre></div>
</div>
</section>
</section>
<section id="id1">
<h2><span class="section-number">7.11. </span>Conclusi√≥n de esta secci√≥n<a class="headerlink" href="#id1" title="Link to this heading">#</a></h2>
<p>Este ejercicio nos permite construir y visualizar un datacube mensual de precipitaci√≥n, combinando im√°genes diarias CHIRPS. La visualizaci√≥n de cada capa en el mapa junto al gr√°fico de evoluci√≥n mensual facilita la detecci√≥n de anomal√≠as clim√°ticas y proporciona insumos valiosos para an√°lisis posteriores en Python.</p>
</section>
<section id="clasificacion-de-tipos-de-suelo-con-sentinel-2-un-enfoque-basado-en-datacubes">
<h2><span class="section-number">7.12. </span>Clasificaci√≥n de tipos de suelo con Sentinel-2: un enfoque basado en datacubes<a class="headerlink" href="#clasificacion-de-tipos-de-suelo-con-sentinel-2-un-enfoque-basado-en-datacubes" title="Link to this heading">#</a></h2>
<section id="id2">
<h3><span class="section-number">7.12.1. </span>Introducci√≥n<a class="headerlink" href="#id2" title="Link to this heading">#</a></h3>
<p>En este laboratorio, vamos a construir un ejemplo claro de datacube aplicado a la clasificaci√≥n de tipos de suelo. Utilizaremos im√°genes Sentinel-2 armonizadas, clasificaremos por Random Forest y generaremos una serie temporal categ√≥rica para el a√±o 2024, con √©nfasis en su interpretaci√≥n como cubo de datos espacio-temporal. Vamos paso por paso.</p>
</section>
<section id="coleccion-de-imagenes-sentinel-2-y-preparacion-del-mosaico-base">
<h3><span class="section-number">7.12.2. </span>Colecci√≥n de im√°genes Sentinel-2 y preparaci√≥n del mosaico base<a class="headerlink" href="#coleccion-de-imagenes-sentinel-2-y-preparacion-del-mosaico-base" title="Link to this heading">#</a></h3>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">s2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ee</span><span class="p">.</span><span class="nx">ImageCollection</span><span class="p">(</span><span class="s2">&quot;COPERNICUS/S2_SR_HARMONIZED&quot;</span><span class="p">);</span>

<span class="kd">var</span><span class="w"> </span><span class="nx">filtered</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">s2</span>
<span class="w">  </span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">ee</span><span class="p">.</span><span class="nx">Filter</span><span class="p">.</span><span class="nx">lt</span><span class="p">(</span><span class="s1">&#39;CLOUDY_PIXEL_PERCENTAGE&#39;</span><span class="p">,</span><span class="w"> </span><span class="mf">30</span><span class="p">))</span>
<span class="w">  </span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">ee</span><span class="p">.</span><span class="nx">Filter</span><span class="p">.</span><span class="nx">date</span><span class="p">(</span><span class="s1">&#39;2024-01-01&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;2025-01-01&#39;</span><span class="p">))</span>
<span class="w">  </span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">ee</span><span class="p">.</span><span class="nx">Filter</span><span class="p">.</span><span class="nx">bounds</span><span class="p">(</span><span class="nx">roi</span><span class="p">))</span>
<span class="w">  </span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s1">&#39;B.*&#39;</span><span class="p">);</span>

<span class="kd">var</span><span class="w"> </span><span class="nx">composite</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">filtered</span><span class="p">.</span><span class="nx">median</span><span class="p">().</span><span class="nx">clip</span><span class="p">(</span><span class="nx">roi</span><span class="p">);</span>

<span class="kd">var</span><span class="w"> </span><span class="nx">rgbVisParams</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">min</span><span class="o">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span>
<span class="w">  </span><span class="nx">max</span><span class="o">:</span><span class="w"> </span><span class="mf">3000</span><span class="p">,</span>
<span class="w">  </span><span class="nx">bands</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;B4&#39;</span><span class="p">,</span><span class="s1">&#39;B3&#39;</span><span class="p">,</span><span class="s1">&#39;B2&#39;</span><span class="p">]</span>
<span class="p">};</span>
<span class="nb">Map</span><span class="p">.</span><span class="nx">addLayer</span><span class="p">(</span><span class="nx">composite</span><span class="p">,</span><span class="w"> </span><span class="nx">rgbVisParams</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;roi: regi√≥n de inter√©s&#39;</span><span class="p">);</span>
<span class="nb">Map</span><span class="p">.</span><span class="nx">centerObject</span><span class="p">(</span><span class="nx">roi</span><span class="p">,</span><span class="w"> </span><span class="mf">10</span><span class="p">);</span>
</pre></div>
</div>
<p>Descripci√≥n: Aqu√≠ preparamos un mosaico RGB de Sentinel-2 a partir de im√°genes del a√±o 2024, filtrando por cobertura nubosa y por la regi√≥n de inter√©s (roi). Este mosaico sirve como base para entrenar el clasificador.</p>
<p>üó∫Ô∏è En el mapa se a√±ade una visualizaci√≥n en color natural de la regi√≥n seleccionada, permitiendo al usuario tener una vista previa del √°rea a clasificar.</p>
</section>
</section>
<section id="definicion-de-clases-de-suelo-y-preparacion-de-datos-de-entrenamiento">
<h2><span class="section-number">7.13. </span>Definici√≥n de clases de suelo y preparaci√≥n de datos de entrenamiento<a class="headerlink" href="#definicion-de-clases-de-suelo-y-preparacion-de-datos-de-entrenamiento" title="Link to this heading">#</a></h2>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">gcps</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">urbano</span><span class="p">.</span><span class="nx">merge</span><span class="p">(</span><span class="nx">agua</span><span class="p">).</span><span class="nx">merge</span><span class="p">(</span><span class="nx">cultivos</span><span class="p">).</span><span class="nx">merge</span><span class="p">(</span><span class="nx">terrenoDesnudo</span><span class="p">).</span><span class="nx">merge</span><span class="p">(</span><span class="nx">bosque</span><span class="p">);</span>
<span class="kd">var</span><span class="w"> </span><span class="nx">gcp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">gcps</span><span class="p">.</span><span class="nx">randomColumn</span><span class="p">();</span>
<span class="kd">var</span><span class="w"> </span><span class="nx">trainingGCP</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">gcp</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">ee</span><span class="p">.</span><span class="nx">Filter</span><span class="p">.</span><span class="nx">lt</span><span class="p">(</span><span class="s1">&#39;random&#39;</span><span class="p">,</span><span class="w"> </span><span class="mf">0.6</span><span class="p">));</span>
<span class="kd">var</span><span class="w"> </span><span class="nx">validationGCP</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">gcp</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">ee</span><span class="p">.</span><span class="nx">Filter</span><span class="p">.</span><span class="nx">gte</span><span class="p">(</span><span class="s1">&#39;random&#39;</span><span class="p">,</span><span class="w"> </span><span class="mf">0.6</span><span class="p">));</span>
</pre></div>
</div>
<p>Descripci√≥n: Se definen manualmente cinco clases: agua, urbano, cultivos, bosque y terreno desnudo. Luego se combinan en una colecci√≥n y se dividen en datos de entrenamiento (60%) y validaci√≥n (40%) mediante una columna aleatoria.</p>
<section id="entrenamiento-del-modelo-random-forest">
<h3><span class="section-number">7.13.1. </span>Entrenamiento del modelo Random Forest<a class="headerlink" href="#entrenamiento-del-modelo-random-forest" title="Link to this heading">#</a></h3>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">training</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">composite</span><span class="p">.</span><span class="nx">sampleRegions</span><span class="p">({</span>
<span class="w">  </span><span class="nx">collection</span><span class="o">:</span><span class="w"> </span><span class="nx">trainingGCP</span><span class="p">,</span>
<span class="w">  </span><span class="nx">properties</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;landcover&#39;</span><span class="p">],</span>
<span class="w">  </span><span class="nx">scale</span><span class="o">:</span><span class="w"> </span><span class="mf">10</span><span class="p">,</span>
<span class="w">  </span><span class="nx">tileScale</span><span class="o">:</span><span class="w"> </span><span class="mf">16</span>
<span class="p">});</span>

<span class="kd">var</span><span class="w"> </span><span class="nx">classifier</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ee</span><span class="p">.</span><span class="nx">Classifier</span><span class="p">.</span><span class="nx">smileRandomForest</span><span class="p">(</span><span class="mf">100</span><span class="p">).</span><span class="nx">train</span><span class="p">({</span>
<span class="w">  </span><span class="nx">features</span><span class="o">:</span><span class="w"> </span><span class="nx">training</span><span class="p">,</span>
<span class="w">  </span><span class="nx">classProperty</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;landcover&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="nx">inputProperties</span><span class="o">:</span><span class="w"> </span><span class="nx">composite</span><span class="p">.</span><span class="nx">bandNames</span><span class="p">()</span>
<span class="p">});</span>
</pre></div>
</div>
<p>Descripci√≥n: Se extraen los valores de las bandas para las regiones de entrenamiento y se entrena un modelo de Random Forest con 100 √°rboles para clasificar los tipos de suelo.</p>
</section>
<section id="clasificacion-de-la-imagen-y-visualizacion-del-resultado">
<h3><span class="section-number">7.13.2. </span>Clasificaci√≥n de la imagen y visualizaci√≥n del resultado<a class="headerlink" href="#clasificacion-de-la-imagen-y-visualizacion-del-resultado" title="Link to this heading">#</a></h3>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">classified</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">composite</span><span class="p">.</span><span class="nx">classify</span><span class="p">(</span><span class="nx">classifier</span><span class="p">);</span>

<span class="kd">var</span><span class="w"> </span><span class="nx">classVis</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">min</span><span class="o">:</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span>
<span class="w">  </span><span class="nx">max</span><span class="o">:</span><span class="w"> </span><span class="mf">4</span><span class="p">,</span>
<span class="w">  </span><span class="nx">palette</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;blue&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;gray&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;green&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;violet&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;orange&#39;</span><span class="p">]</span>
<span class="p">};</span>

<span class="nb">Map</span><span class="p">.</span><span class="nx">addLayer</span><span class="p">(</span><span class="nx">classified</span><span class="p">.</span><span class="nx">clip</span><span class="p">(</span><span class="nx">roi</span><span class="p">),</span><span class="w"> </span><span class="nx">classVis</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Imagen Clasificada&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>Descripci√≥n: Se clasifica el mosaico de Sentinel-2 usando el modelo entrenado y se visualiza el mapa resultante. Cada clase se representa con un color distinto.</p>
<p>En el mapa se observa la distribuci√≥n espacial de las clases de suelo sobre la regi√≥n de inter√©s.</p>
</section>
<section id="evaluacion-del-modelo">
<h3><span class="section-number">7.13.3. </span>Evaluaci√≥n del modelo<a class="headerlink" href="#evaluacion-del-modelo" title="Link to this heading">#</a></h3>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">test</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">classified</span><span class="p">.</span><span class="nx">sampleRegions</span><span class="p">({</span>
<span class="w">  </span><span class="nx">collection</span><span class="o">:</span><span class="w"> </span><span class="nx">validationGCP</span><span class="p">,</span>
<span class="w">  </span><span class="nx">properties</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;landcover&#39;</span><span class="p">],</span>
<span class="w">  </span><span class="nx">scale</span><span class="o">:</span><span class="w"> </span><span class="mf">10</span>
<span class="p">});</span>

<span class="kd">var</span><span class="w"> </span><span class="nx">testConfusionMatrix</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">test</span><span class="p">.</span><span class="nx">errorMatrix</span><span class="p">(</span><span class="s1">&#39;landcover&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;classification&#39;</span><span class="p">);</span>
<span class="nx">print</span><span class="p">(</span><span class="s1">&#39;Confusion Matrix&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">testConfusionMatrix</span><span class="p">);</span>
<span class="nx">print</span><span class="p">(</span><span class="s1">&#39;Test Accuracy&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">testConfusionMatrix</span><span class="p">.</span><span class="nx">accuracy</span><span class="p">());</span>
<span class="nx">print</span><span class="p">(</span><span class="s1">&#39;Producers Accuracy:&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">testConfusionMatrix</span><span class="p">.</span><span class="nx">producersAccuracy</span><span class="p">());</span>
<span class="nx">print</span><span class="p">(</span><span class="s1">&#39;Consumers Accuracy:&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">testConfusionMatrix</span><span class="p">.</span><span class="nx">consumersAccuracy</span><span class="p">());</span>
<span class="nx">print</span><span class="p">(</span><span class="s1">&#39; Kappa Coefficient: &#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">testConfusionMatrix</span><span class="p">.</span><span class="nx">kappa</span><span class="p">());</span>
<span class="nx">print</span><span class="p">(</span><span class="s1">&#39;F-Score:&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">testConfusionMatrix</span><span class="p">.</span><span class="nx">fscore</span><span class="p">(</span><span class="mf">1</span><span class="p">));</span>
</pre></div>
</div>
<p>Descripci√≥n: Se eval√∫a la precisi√≥n del modelo mediante una matriz de confusi√≥n y se imprimen m√©tricas clave: exactitud global, precisi√≥n por clase, coeficiente de Kappa y F-score.</p>
<p>Consola: Muestra resultados num√©ricos que indican cu√°n bien el modelo ha clasificado las diferentes clases en los datos de validaci√≥n.</p>
</section>
<section id="configuracion-de-la-serie-temporal">
<h3><span class="section-number">7.13.4. </span>Configuraci√≥n de la serie temporal<a class="headerlink" href="#configuracion-de-la-serie-temporal" title="Link to this heading">#</a></h3>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">frecuencia</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;bimestral&quot;</span><span class="p">;</span>
<span class="kd">var</span><span class="w"> </span><span class="nx">mesesPorPaso</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="s2">&quot;mensual&quot;</span><span class="o">:</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span>
<span class="w">  </span><span class="s2">&quot;bimestral&quot;</span><span class="o">:</span><span class="w"> </span><span class="mf">2</span><span class="p">,</span>
<span class="w">  </span><span class="s2">&quot;trimestral&quot;</span><span class="o">:</span><span class="w"> </span><span class="mf">3</span><span class="p">,</span>
<span class="w">  </span><span class="s2">&quot;cuatrimestral&quot;</span><span class="o">:</span><span class="w"> </span><span class="mf">4</span>
<span class="p">};</span>

<span class="kd">var</span><span class="w"> </span><span class="nx">paso</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">mesesPorPaso</span><span class="p">[</span><span class="nx">frecuencia</span><span class="p">];</span>
<span class="kd">var</span><span class="w"> </span><span class="nx">fechas</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ee</span><span class="p">.</span><span class="nx">List</span><span class="p">.</span><span class="nx">sequence</span><span class="p">(</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">12</span><span class="p">,</span><span class="w"> </span><span class="nx">paso</span><span class="p">).</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">mes</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nx">ee</span><span class="p">.</span><span class="nb">Date</span><span class="p">(</span><span class="s1">&#39;2024-01-01&#39;</span><span class="p">).</span><span class="nx">advance</span><span class="p">(</span><span class="nx">mes</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;month&#39;</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
</div>
<p>Descripci√≥n: Configuramos la frecuencia temporal de la serie para generar nuestro datacube categ√≥rico. En este caso, elegimos una frecuencia bimestral.</p>
</section>
<section id="clasificacion-temporal-e-interpretacion-del-datacube">
<h3><span class="section-number">7.13.5. </span>Clasificaci√≥n temporal e interpretaci√≥n del datacube<a class="headerlink" href="#clasificacion-temporal-e-interpretacion-del-datacube" title="Link to this heading">#</a></h3>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">coleccionClasificada</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ee</span><span class="p">.</span><span class="nx">FeatureCollection</span><span class="p">(</span><span class="nx">fechas</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">fechaInicio</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// ...</span>
<span class="p">}));</span>
</pre></div>
</div>
<p>Descripci√≥n: Para cada per√≠odo bimestral, se crea un nuevo mosaico de Sentinel-2, se clasifica y se cuenta la cantidad de p√≠xeles por clase. Esta colecci√≥n temporal de objetos Feature conforma el n√∫cleo del datacube: cada capa representa un per√≠odo de tiempo con distribuci√≥n espacial clasificada.</p>
<p>üßä Datacube: Este es un cubo de datos categ√≥ricos donde:</p>
<p>El eje x es el tiempo (bimestres).</p>
<p>El eje y representa las clases del suelo.</p>
<p>El eje z es la cantidad de p√≠xeles por clase, reflejando √°rea relativa.</p>
<ol class="arabic simple" start="8">
<li><p>Visualizaci√≥n de resultados en consola</p></li>
</ol>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">print</span><span class="p">(</span><span class="nx">grafico</span><span class="p">);</span><span class="w">          </span><span class="c1">// gr√°fico apilado por clase</span>
<span class="nx">print</span><span class="p">(</span><span class="nx">tablaCantidad</span><span class="p">);</span><span class="w">    </span><span class="c1">// cantidad de im√°genes por per√≠odo</span>
<span class="nx">print</span><span class="p">(</span><span class="nx">graficoCantidad</span><span class="p">);</span><span class="w">  </span><span class="c1">// gr√°fico de cantidad de im√°genes</span>
<span class="nx">print</span><span class="p">(</span><span class="nx">graficoPorcentual</span><span class="p">);</span><span class="w"> </span><span class="c1">// evoluci√≥n porcentual por clase</span>
</pre></div>
</div>
<p>Descripci√≥n:</p>
<p>Gr√°fico apilado: muestra cu√°ntos p√≠xeles ocupa cada clase por per√≠odo, permitiendo detectar cambios como expansi√≥n urbana o p√©rdida de vegetaci√≥n.</p>
<p>Gr√°fico de im√°genes: se√±ala cu√°ntas im√°genes se usaron por per√≠odo, √∫til para evaluar calidad del mosaico.</p>
<p>Gr√°fico porcentual: destaca tendencias proporcionales. Por ejemplo, si el √°rea urbana crece, su porcentaje aumentar√° aunque el n√∫mero de p√≠xeles totales tambi√©n lo haga.</p>
<ol class="arabic simple" start="9">
<li><p>Visualizaci√≥n espacial del datacube
Gracias al siguiente bloque:</p></li>
</ol>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">fechasStr</span><span class="p">.</span><span class="nx">evaluate</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">listaFechas</span><span class="p">){</span>
<span class="w">  </span><span class="nx">listaFechas</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">fechaStr</span><span class="p">){</span>
<span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nx">fechaInicio</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ee</span><span class="p">.</span><span class="nb">Date</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s1">&#39;YYYY-MM&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">fechaStr</span><span class="p">);</span>
<span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nx">fechaFin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">fechaInicio</span><span class="p">.</span><span class="nx">advance</span><span class="p">(</span><span class="nx">paso</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;month&#39;</span><span class="p">);</span>

<span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nx">imagen</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">s2</span>
<span class="w">      </span><span class="p">.</span><span class="nx">filterDate</span><span class="p">(</span><span class="nx">fechaInicio</span><span class="p">,</span><span class="w"> </span><span class="nx">fechaFin</span><span class="p">)</span>
<span class="w">      </span><span class="p">.</span><span class="nx">filterBounds</span><span class="p">(</span><span class="nx">roi</span><span class="p">)</span>
<span class="w">      </span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">ee</span><span class="p">.</span><span class="nx">Filter</span><span class="p">.</span><span class="nx">lt</span><span class="p">(</span><span class="s1">&#39;CLOUDY_PIXEL_PERCENTAGE&#39;</span><span class="p">,</span><span class="w"> </span><span class="mf">30</span><span class="p">))</span>
<span class="w">      </span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s1">&#39;B.*&#39;</span><span class="p">)</span>
<span class="w">      </span><span class="p">.</span><span class="nx">median</span><span class="p">()</span>
<span class="w">      </span><span class="p">.</span><span class="nx">clip</span><span class="p">(</span><span class="nx">roi</span><span class="p">);</span>

<span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nx">clasificada</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">imagen</span><span class="p">.</span><span class="nx">classify</span><span class="p">(</span><span class="nx">classifier</span><span class="p">);</span>
<span class="w">    </span><span class="nb">Map</span><span class="p">.</span><span class="nx">addLayer</span><span class="p">(</span><span class="nx">clasificada</span><span class="p">,</span><span class="w"> </span><span class="nx">classVis</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Clasificada &#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">fechaStr</span><span class="p">);</span>
<span class="w">  </span><span class="p">});</span>
<span class="p">});</span>
</pre></div>
</div>
<p>Descripci√≥n: Se visualiza en el mapa la imagen clasificada para cada per√≠odo, completando as√≠ el datacube con su representaci√≥n espacial. Esto permite identificar, por ejemplo, que en marzo de 2024 predomina la clase ‚ÄúCultivos‚Äù o que en mayo crece el parche urbano.</p>
</section>
<section id="interpretacion-especifica-ejemplo-marzo-2024">
<h3><span class="section-number">7.13.6. </span>Interpretaci√≥n espec√≠fica: ejemplo marzo 2024<a class="headerlink" href="#interpretacion-especifica-ejemplo-marzo-2024" title="Link to this heading">#</a></h3>
<p>Supongamos que en marzo de 2024 hubo inundaciones. Si vemos en consola el siguiente Feature:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">yaml</span>
<span class="nx">Copy</span>
<span class="nx">Edit</span>
<span class="nx">Feature</span><span class="w"> </span><span class="mf">3</span>
<span class="nx">fecha</span><span class="o">:</span><span class="w"> </span><span class="mf">2024</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mo">01</span>
<span class="nx">Agua</span><span class="o">:</span><span class="w"> </span><span class="mf">120000</span>
<span class="nx">Urbano</span><span class="o">:</span><span class="w"> </span><span class="mf">85000</span>
<span class="nx">Cultivos</span><span class="o">:</span><span class="w"> </span><span class="mf">150000</span>
<span class="nx">Bosque</span><span class="o">-</span><span class="nx">Area</span><span class="w"> </span><span class="nx">arbustiva</span><span class="o">:</span><span class="w"> </span><span class="mf">30000</span>
<span class="nx">Terreno</span><span class="w"> </span><span class="nx">desnudo</span><span class="o">:</span><span class="w"> </span><span class="mf">18000</span>
</pre></div>
</div>
<p>Interpretaci√≥n: Aqu√≠ vemos un aumento inusual en la cantidad de p√≠xeles clasificados como ‚ÄúAgua‚Äù, lo que podr√≠a reflejar la superficie inundada durante ese mes.</p>
</section>
<section id="conclusion">
<h3><span class="section-number">7.13.7. </span>Conclusi√≥n<a class="headerlink" href="#conclusion" title="Link to this heading">#</a></h3>
<p>Este ejemplo nos muestra c√≥mo construir un datacube categ√≥rico sobre tipos de suelo usando im√°genes Sentinel-2, Random Forest y Google Earth Engine. Integramos series temporales espaciales clasificadas, m√©tricas de validaci√≥n del modelo, visualizaciones din√°micas y tablas estad√≠sticas. Esta estrategia es ideal para monitoreo de uso del suelo, detecci√≥n de cambios, gesti√≥n ambiental y planificaci√≥n urbana.</p>
<p>Este es un ejemplo de c√≥mo un cubo de datos no solo organiza informaci√≥n geoespacial, sino que nos permite responder a preguntas relevantes sobre qu√© tipo de cobertura existe, cu√°ndo cambia y d√≥nde ocurre.</p>
</section>
</section>
<section id="ejemplo-2-serie-temporal-de-clases-de-suelo-con-clasificador-entrenado">
<h2><span class="section-number">7.14. </span>Ejemplo 2: Serie Temporal de Clases de Suelo con Clasificador Entrenado<a class="headerlink" href="#ejemplo-2-serie-temporal-de-clases-de-suelo-con-clasificador-entrenado" title="Link to this heading">#</a></h2>
<p>En esta secci√≥n vamos a aplicar el clasificador supervisado que entrenamos en cap√≠tulo 2 sobre datos Sentinel-2 de la ciudad de Rosario. Nuestro objetivo es generar una serie temporal que nos permita observar c√≥mo evolucionan los distintos tipos de cobertura del suelo a lo largo del tiempo, distinguiendo clases como agua, zonas urbanas, cultivos, vegetaci√≥n natural y terreno desnudo.</p>
<p>BLOQUE 1: Configuraci√≥n del per√≠odo temporal</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">frecuencia</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;bimestral&quot;</span><span class="p">;</span>
<span class="nx">Definimos</span><span class="w"> </span><span class="nx">la</span><span class="w"> </span><span class="nx">frecuencia</span><span class="w"> </span><span class="nx">temporal</span><span class="w"> </span><span class="nx">con</span><span class="w"> </span><span class="nx">la</span><span class="w"> </span><span class="nx">que</span><span class="w"> </span><span class="nx">vamos</span><span class="w"> </span><span class="nx">a</span><span class="w"> </span><span class="nx">construir</span><span class="w"> </span><span class="nx">nuestra</span><span class="w"> </span><span class="nx">serie</span><span class="w"> </span><span class="nx">de</span><span class="w"> </span><span class="nx">tiempo</span><span class="p">.</span><span class="w"> </span><span class="nx">En</span><span class="w"> </span><span class="nx">este</span><span class="w"> </span><span class="nx">caso</span><span class="w"> </span><span class="nx">elegimos</span><span class="w"> </span><span class="nx">bimestral</span><span class="p">,</span><span class="w"> </span><span class="nx">lo</span><span class="w"> </span><span class="nx">que</span><span class="w"> </span><span class="nx">implica</span><span class="w"> </span><span class="nx">que</span><span class="w"> </span><span class="nx">cada</span><span class="w"> </span><span class="nx">punto</span><span class="w"> </span><span class="nx">de</span><span class="w"> </span><span class="nx">la</span><span class="w"> </span><span class="nx">serie</span><span class="w"> </span><span class="nx">va</span><span class="w"> </span><span class="nx">a</span><span class="w"> </span><span class="nx">representar</span><span class="w"> </span><span class="nx">un</span><span class="w"> </span><span class="nx">promedio</span><span class="w"> </span><span class="nx">de</span><span class="w"> </span><span class="nx">dos</span><span class="w"> </span><span class="nx">meses</span><span class="p">.</span>
<span class="nx">javascript</span>
<span class="nx">CopyEdit</span>
<span class="kd">var</span><span class="w"> </span><span class="nx">mesesPorPaso</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="s2">&quot;mensual&quot;</span><span class="o">:</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span>
<span class="w">  </span><span class="s2">&quot;bimestral&quot;</span><span class="o">:</span><span class="w"> </span><span class="mf">2</span><span class="p">,</span>
<span class="w">  </span><span class="s2">&quot;trimestral&quot;</span><span class="o">:</span><span class="w"> </span><span class="mf">3</span><span class="p">,</span>
<span class="w">  </span><span class="s2">&quot;cuatrimestral&quot;</span><span class="o">:</span><span class="w"> </span><span class="mf">4</span>
<span class="p">};</span>
</pre></div>
</div>
<p>Creamos un diccionario que traduce cada opci√≥n de frecuencia en una cantidad de meses. Esto nos permitir√° usar la misma estructura para distintas resoluciones temporales.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">paso</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">mesesPorPaso</span><span class="p">[</span><span class="nx">frecuencia</span><span class="p">];</span>
<span class="nx">Extraemos</span><span class="w"> </span><span class="nx">el</span><span class="w"> </span><span class="nx">valor</span><span class="w"> </span><span class="nx">del</span><span class="w"> </span><span class="nx">paso</span><span class="w"> </span><span class="nx">correspondiente</span><span class="w"> </span><span class="nx">a</span><span class="w"> </span><span class="nx">la</span><span class="w"> </span><span class="nx">frecuencia</span><span class="w"> </span><span class="nx">elegida</span><span class="w"> </span><span class="p">(</span><span class="nx">en</span><span class="w"> </span><span class="nx">este</span><span class="w"> </span><span class="nx">caso</span><span class="w"> </span><span class="mf">2</span><span class="w"> </span><span class="nx">meses</span><span class="p">).</span>
<span class="nx">javascript</span>
<span class="nx">CopyEdit</span>
<span class="kd">var</span><span class="w"> </span><span class="nx">fechas</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ee</span><span class="p">.</span><span class="nx">List</span><span class="p">.</span><span class="nx">sequence</span><span class="p">(</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">12</span><span class="p">,</span><span class="w"> </span><span class="nx">paso</span><span class="p">).</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">mes</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nx">ee</span><span class="p">.</span><span class="nb">Date</span><span class="p">(</span><span class="s1">&#39;2024-01-01&#39;</span><span class="p">).</span><span class="nx">advance</span><span class="p">(</span><span class="nx">mes</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;month&#39;</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
</div>
<p>Generamos una lista de fechas que representan los inicios de cada per√≠odo bimestral, a partir de enero de 2024. Cada valor es un objeto ee.Date.</p>
<section id="bloque-2-definicion-de-etiquetas-de-clases">
<h3><span class="section-number">7.14.1. </span>BLOQUE 2: Definici√≥n de etiquetas de clases<a class="headerlink" href="#bloque-2-definicion-de-etiquetas-de-clases" title="Link to this heading">#</a></h3>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">etiquetas</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ee</span><span class="p">.</span><span class="nx">Dictionary</span><span class="p">({</span>
<span class="w">  </span><span class="s1">&#39;0&#39;</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Agua&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="s1">&#39;1&#39;</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Urbano&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="s1">&#39;2&#39;</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Cultivos&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="s1">&#39;3&#39;</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Bosque-Area arbustiva&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="s1">&#39;4&#39;</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Terreno desnudo&#39;</span>
<span class="p">});</span>
</pre></div>
</div>
<p>Creamos un diccionario que asocia cada c√≥digo de clase (usado por el clasificador) con un nombre legible. Esto nos permitir√° mostrar las clases en gr√°ficos con nombres descriptivos.</p>
</section>
<section id="bloque-3-aplicacion-del-clasificador-por-periodo">
<h3><span class="section-number">7.14.2. </span>BLOQUE 3: Aplicaci√≥n del clasificador por per√≠odo<a class="headerlink" href="#bloque-3-aplicacion-del-clasificador-por-periodo" title="Link to this heading">#</a></h3>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">coleccionClasificada</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ee</span><span class="p">.</span><span class="nx">FeatureCollection</span><span class="p">(</span><span class="nx">fechas</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">fechaInicio</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</pre></div>
</div>
<p>Usamos map() para iterar sobre la lista de fechas y aplicar la misma l√≥gica de clasificaci√≥n a cada per√≠odo bimestral.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">fechaFin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ee</span><span class="p">.</span><span class="nb">Date</span><span class="p">(</span><span class="nx">fechaInicio</span><span class="p">).</span><span class="nx">advance</span><span class="p">(</span><span class="nx">paso</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;month&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>Calculamos la fecha final del per√≠odo sumando el paso (dos meses en este caso) a la fecha de inicio.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">s2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ee</span><span class="p">.</span><span class="nx">ImageCollection</span><span class="p">(</span><span class="s2">&quot;COPERNICUS/S2_SR_HARMONIZED&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="p">.</span><span class="nx">filterDate</span><span class="p">(</span><span class="nx">fechaInicio</span><span class="p">,</span><span class="w"> </span><span class="nx">fechaFin</span><span class="p">)</span>
<span class="w">    </span><span class="p">.</span><span class="nx">filterBounds</span><span class="p">(</span><span class="nx">roi</span><span class="p">)</span>
<span class="w">    </span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">ee</span><span class="p">.</span><span class="nx">Filter</span><span class="p">.</span><span class="nx">lt</span><span class="p">(</span><span class="s1">&#39;CLOUDY_PIXEL_PERCENTAGE&#39;</span><span class="p">,</span><span class="w"> </span><span class="mf">30</span><span class="p">))</span>
<span class="w">    </span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s1">&#39;B.*&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>Descargamos las im√°genes Sentinel-2 del per√≠odo actual:
‚Ä¢	Filtramos por fechas, regi√≥n de inter√©s (roi) y porcentaje de nubes.
‚Ä¢	Seleccionamos todas las bandas √≥pticas.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">imagen</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">s2</span><span class="p">.</span><span class="nx">median</span><span class="p">().</span><span class="nx">clip</span><span class="p">(</span><span class="nx">roi</span><span class="p">);</span>
</pre></div>
</div>
<p>Calculamos la mediana de las im√°genes en el per√≠odo y la recortamos al √°rea de estudio.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">clasificada</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">imagen</span><span class="p">.</span><span class="nx">classify</span><span class="p">(</span><span class="nx">classifier</span><span class="p">);</span>
</pre></div>
</div>
<p>Aplicamos el clasificador previamente entrenado a la imagen compuesta para generar un raster de clases.</p>
</section>
<section id="bloque-4-conteo-de-pixeles-por-clase">
<h3><span class="section-number">7.14.3. </span>BLOQUE 4: Conteo de p√≠xeles por clase<a class="headerlink" href="#bloque-4-conteo-de-pixeles-por-clase" title="Link to this heading">#</a></h3>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">histograma</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">clasificada</span><span class="p">.</span><span class="nx">reduceRegion</span><span class="p">({</span>
<span class="w">    </span><span class="nx">reducer</span><span class="o">:</span><span class="w"> </span><span class="nx">ee</span><span class="p">.</span><span class="nx">Reducer</span><span class="p">.</span><span class="nx">frequencyHistogram</span><span class="p">(),</span>
<span class="w">    </span><span class="nx">geometry</span><span class="o">:</span><span class="w"> </span><span class="nx">ee</span><span class="p">.</span><span class="nx">FeatureCollection</span><span class="p">(</span><span class="nx">roi</span><span class="p">).</span><span class="nx">geometry</span><span class="p">(),</span>
<span class="w">    </span><span class="nx">scale</span><span class="o">:</span><span class="w"> </span><span class="mf">30</span><span class="p">,</span>
<span class="w">    </span><span class="nx">maxPixels</span><span class="o">:</span><span class="w"> </span><span class="mf">1e13</span>
<span class="w">  </span><span class="p">}).</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;classification&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>Reducimos la imagen clasificada a una tabla que indica cu√°ntos p√≠xeles hay de cada clase en ese per√≠odo, usando un histograma.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="kd">var</span><span class="w"> </span><span class="nx">dict</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ee</span><span class="p">.</span><span class="nx">Dictionary</span><span class="p">(</span><span class="nx">histograma</span><span class="p">);</span>
<span class="w">  </span><span class="kd">var</span><span class="w"> </span><span class="nx">keys</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">dict</span><span class="p">.</span><span class="nx">keys</span><span class="p">();</span>
<span class="w">  </span><span class="kd">var</span><span class="w"> </span><span class="nx">valores</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">keys</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">k</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nx">dict</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">k</span><span class="p">);</span><span class="w"> </span><span class="p">});</span>
</pre></div>
</div>
<p>Obtenemos las claves del diccionario (0, 1, etc.) y los valores asociados (cantidad de p√≠xeles).</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="kd">var</span><span class="w"> </span><span class="nx">nuevasClaves</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">keys</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">k</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">etiquetas</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">k</span><span class="p">);</span>
<span class="w">  </span><span class="p">});</span>
</pre></div>
</div>
<p>Traducimos las claves num√©ricas por sus nombres: agua, urbano, etc.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="kd">var</span><span class="w"> </span><span class="nx">propsEtiquetadas</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ee</span><span class="p">.</span><span class="nx">Dictionary</span><span class="p">.</span><span class="nx">fromLists</span><span class="p">(</span><span class="nx">nuevasClaves</span><span class="p">,</span><span class="w"> </span><span class="nx">valores</span><span class="p">);</span>
</pre></div>
</div>
<p>Construimos un nuevo diccionario con claves descriptivas y valores num√©ricos.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">ft</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ee</span><span class="p">.</span><span class="nx">Feature</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="nx">propsEtiquetadas</span><span class="p">)</span>
<span class="w">    </span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;fecha&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">ee</span><span class="p">.</span><span class="nb">Date</span><span class="p">(</span><span class="nx">fechaInicio</span><span class="p">).</span><span class="nx">format</span><span class="p">(</span><span class="s1">&#39;YYYY-MM-dd&#39;</span><span class="p">));</span>
<span class="w">    </span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nx">ft</span><span class="p">;</span>
<span class="p">}));</span>
</pre></div>
</div>
<p>Creamos un Feature con los datos de ese per√≠odo y la fecha correspondiente, y lo devolvemos. Al final, coleccionClasificada es una colecci√≥n de Features, uno por per√≠odo.</p>
</section>
<section id="bloque-5-visualizacion-absoluta">
<h3><span class="section-number">7.14.4. </span>BLOQUE 5: Visualizaci√≥n absoluta<a class="headerlink" href="#bloque-5-visualizacion-absoluta" title="Link to this heading">#</a></h3>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">grafico</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ui</span><span class="p">.</span><span class="nx">Chart</span><span class="p">.</span><span class="nx">feature</span><span class="p">.</span><span class="nx">byFeature</span><span class="p">({</span>
<span class="w">  </span><span class="nx">features</span><span class="o">:</span><span class="w"> </span><span class="nx">coleccionClasificada</span><span class="p">,</span>
<span class="w">  </span><span class="nx">xProperty</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;fecha&#39;</span>
<span class="p">}).</span><span class="nx">setChartType</span><span class="p">(</span><span class="s1">&#39;ColumnChart&#39;</span><span class="p">).</span><span class="nx">setOptions</span><span class="p">({</span>
<span class="w">  </span><span class="nx">title</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Serie temporal de clases de suelo - &#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">frecuencia</span><span class="p">,</span>
<span class="w">  </span><span class="nx">hAxis</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="nx">title</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Fecha&#39;</span><span class="p">},</span>
<span class="w">  </span><span class="nx">vAxis</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="nx">title</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Cantidad de p√≠xeles&#39;</span><span class="p">},</span>
<span class="w">  </span><span class="nx">isStacked</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span>
<span class="p">});</span>
</pre></div>
</div>
<p>Creamos un gr√°fico de barras apiladas que muestra la cantidad absoluta de p√≠xeles por clase en cada per√≠odo. Esto permite ver por ejemplo si aumentaron los cultivos o disminuy√≥ el √°rea urbana en un bimestre determinado.</p>
</section>
<section id="bloque-6-conversion-a-porcentajes">
<h3><span class="section-number">7.14.5. </span>BLOQUE 6: Conversi√≥n a porcentajes<a class="headerlink" href="#bloque-6-conversion-a-porcentajes" title="Link to this heading">#</a></h3>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">coleccionPorcentual</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">coleccionClasificada</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">feat</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</pre></div>
</div>
<p>Iteramos sobre cada Feature de la colecci√≥n anterior para convertir los valores absolutos en porcentajes.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="kd">var</span><span class="w"> </span><span class="nx">props</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">feat</span><span class="p">.</span><span class="nx">toDictionary</span><span class="p">();</span>
<span class="w">  </span><span class="kd">var</span><span class="w"> </span><span class="nx">clases</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">props</span><span class="p">.</span><span class="nx">keys</span><span class="p">().</span><span class="nx">remove</span><span class="p">(</span><span class="s1">&#39;fecha&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>Convertimos cada Feature en un diccionario y extraemos las clases (omitimos la fecha).</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="kd">var</span><span class="w"> </span><span class="nx">total</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ee</span><span class="p">.</span><span class="nb">Number</span><span class="p">(</span>
<span class="w">    </span><span class="nx">clases</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">k</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="nx">ee</span><span class="p">.</span><span class="nb">Number</span><span class="p">(</span><span class="nx">props</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">k</span><span class="p">));</span>
<span class="w">    </span><span class="p">}).</span><span class="nx">reduce</span><span class="p">(</span><span class="nx">ee</span><span class="p">.</span><span class="nx">Reducer</span><span class="p">.</span><span class="nx">sum</span><span class="p">())</span>
<span class="w">  </span><span class="p">);</span>
</pre></div>
</div>
<p>Calculamos el total de p√≠xeles clasificados en ese per√≠odo.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="w"> </span><span class="kd">var</span><span class="w"> </span><span class="nx">nuevasProps</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ee</span><span class="p">.</span><span class="nx">Dictionary</span><span class="p">(</span>
<span class="w">    </span><span class="nx">clases</span><span class="p">.</span><span class="nx">iterate</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">k</span><span class="p">,</span><span class="w"> </span><span class="nx">acc</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="p">...</span>
<span class="w">    </span><span class="p">},</span><span class="w"> </span><span class="nx">ee</span><span class="p">.</span><span class="nx">Dictionary</span><span class="p">({}))</span>
<span class="w">  </span><span class="p">);</span>
</pre></div>
</div>
<p>Para cada clase, calculamos su porcentaje con respecto al total y lo guardamos en un nuevo diccionario.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nx">ee</span><span class="p">.</span><span class="nx">Feature</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="nx">nuevasProps</span><span class="p">)</span>
<span class="w">    </span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;fecha&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">props</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;fecha&#39;</span><span class="p">));</span>
<span class="p">});</span>
</pre></div>
</div>
<p>Creamos un nuevo Feature para cada per√≠odo, ahora con porcentajes. coleccionPorcentual es una colecci√≥n con los datos relativos.</p>
</section>
<section id="bloque-7-visualizacion-porcentual">
<h3><span class="section-number">7.14.6. </span>BLOQUE 7: Visualizaci√≥n porcentual<a class="headerlink" href="#bloque-7-visualizacion-porcentual" title="Link to this heading">#</a></h3>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">graficoPorcentual</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ui</span><span class="p">.</span><span class="nx">Chart</span><span class="p">.</span><span class="nx">feature</span><span class="p">.</span><span class="nx">byFeature</span><span class="p">({</span>
<span class="w">  </span><span class="nx">features</span><span class="o">:</span><span class="w"> </span><span class="nx">coleccionPorcentual</span><span class="p">,</span>
<span class="w">  </span><span class="nx">xProperty</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;fecha&#39;</span>
<span class="p">}).</span><span class="nx">setChartType</span><span class="p">(</span><span class="s1">&#39;LineChart&#39;</span><span class="p">).</span><span class="nx">setOptions</span><span class="p">({</span>
<span class="w">  </span><span class="nx">title</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Serie temporal porcentual de clases de suelo - &#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">frecuencia</span><span class="p">,</span>
<span class="w">  </span><span class="nx">hAxis</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="nx">title</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Fecha&#39;</span><span class="p">},</span>
<span class="w">  </span><span class="nx">vAxis</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">title</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Porcentaje (%)&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">minValue</span><span class="o">:</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span>
<span class="w">    </span><span class="nx">maxValue</span><span class="o">:</span><span class="w"> </span><span class="mf">100</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nx">isStacked</span><span class="o">:</span><span class="w"> </span><span class="kc">false</span>
<span class="p">});</span>
<span class="nx">print</span><span class="p">(</span><span class="nx">graficoPorcentual</span><span class="p">);</span>
</pre></div>
</div>
<p>Mostramos un gr√°fico de l√≠neas con la evoluci√≥n relativa de cada clase. A diferencia del gr√°fico anterior, este permite detectar tendencias aunque cambie el n√∫mero total de p√≠xeles disponibles (por ejemplo, por nubosidad).</p>
</section>
</section>
<section id="id3">
<h2><span class="section-number">7.15. </span>Conclusi√≥n<a class="headerlink" href="#id3" title="Link to this heading">#</a></h2>
<p>Con este √∫ltimo c√≥digo logramos aplicar autom√°ticamente el clasificador de suelos para Rosario a cada per√≠odo bimestral. A partir de ah√≠, generamos una serie de tiempo de clases del suelo que nos permite observar tanto los cambios absolutos como los relativos. Este enfoque es ideal para detectar procesos de urbanizaci√≥n, expansi√≥n agr√≠cola, deforestaci√≥n o cambios hidrol√≥gicos en el territorio.</p>
</section>
<section id="video-del-capitulo">
<h2><span class="section-number">7.16. </span>Video del cap√≠tulo<a class="headerlink" href="#video-del-capitulo" title="Link to this heading">#</a></h2>
<p>Podes mirar el video asociado a este cap√≠tulo en el canal de youtube de IDERA: ttps://www.youtube.com/watch?v=mxV8URF8z9U&amp;t=1538s</p>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "cdg-idera/PAT_INT_GEE",
            ref: "main",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="Cap6_ST.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title"><span class="section-number">6. </span>Cap√≠tulo 6 ¬∑ Serie Temporales</p>
      </div>
    </a>
    <a class="right-next"
       href="notebooks/Lab_002_RandomForest_Rosario_FOLIUM_THEBE_FIXED.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title"><span class="section-number">8. </span>Lab 002 ¬∑ Random Forest (Rosario) ‚Äî Folium / Thebe</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#introduccion">7.1. Introducci√≥n</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#de-imagenes-satelitales-a-cubos-de-imagenes">7.2. De im√°genes satelitales a Cubos de Im√°genes</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#revisitando-la-tierra-frecuencia-y-volumen-de-datos-en-sentinel-2">7.3. Revisitando la Tierra: frecuencia y volumen de datos en Sentinel 2</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#aplicaciones-reales-y-cierre">7.4. Aplicaciones reales y cierre</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#datacube-de-temperatura-superficial-en-bahia-blanca-con-gee">7.5. Datacube de temperatura superficial en Bah√≠a Blanca con GEE</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#paso-1-definir-la-region-de-interes">7.5.1. Paso 1: Definir la regi√≥n de inter√©s</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#paso-2-seleccion-temporal">7.5.2. Paso 2: Selecci√≥n temporal</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#paso-3-cargar-modis-lst-y-convertir-unidades">7.5.3. Paso 3: Cargar MODIS LST y convertir unidades</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#paso-4-parametros-visuales-para-el-mapa">7.5.4. Paso 4: Par√°metros visuales para el mapa</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#paso-5-y-6-generar-imagenes-mensuales-y-mostrarlas-en-el-mapa">7.5.5. Paso 5 y 6: Generar im√°genes mensuales y mostrarlas en el mapa</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#paso-7-crear-tabla-de-promedios-mensuales-reduccion-espacial">7.5.6. Paso 7: Crear tabla de promedios mensuales (reducci√≥n espacial)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#paso-8-visualizar-la-serie-de-tiempo">7.5.7. Paso 8: Visualizar la serie de tiempo</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#paso-9-estetica-del-mapa">7.5.8. Paso 9: Est√©tica del mapa</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#paso-10-exportar-la-serie-al-drive">7.5.9. Paso 10: Exportar la serie al Drive</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#conclusion-de-esta-seccion">7.6. Conclusi√≥n de esta secci√≥n</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#visualizacion-y-analisis-de-un-datacube-de-precipitacion-mensual-en-bahia-blanca-chirps">7.7. Visualizaci√≥n y an√°lisis de un datacube de precipitaci√≥n mensual en Bah√≠a Blanca (CHIRPS)</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#que-es-chirps">7.8. ¬øQu√© es CHIRPS?</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#seleccion-de-la-region-bahia-blanca">7.9. Selecci√≥n de la regi√≥n: Bah√≠a Blanca</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#definimos-el-periodo-de-analisis">7.9.1. Definimos el per√≠odo de an√°lisis</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#cargamos-la-coleccion-chirps-diaria">7.9.2. Cargamos la colecci√≥n CHIRPS diaria</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#paleta-de-colores-para-visualizacion">7.9.3. Paleta de colores para visualizaci√≥n</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#visualizamos-cada-capa-mensual-del-datacube">7.9.4. Visualizamos cada capa mensual del datacube</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#calculo-de-la-serie-temporal-mensual-promedio">7.9.5. C√°lculo de la serie temporal mensual promedio</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#grafico-de-barras-de-la-serie">7.9.6. Gr√°fico de barras de la serie</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ejemplo-concreto-feature-14">7.10. Ejemplo concreto: Feature 14</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#mejora-estetica-del-mapa">7.10.1. Mejora est√©tica del mapa</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">7.11. Conclusi√≥n de esta secci√≥n</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#clasificacion-de-tipos-de-suelo-con-sentinel-2-un-enfoque-basado-en-datacubes">7.12. Clasificaci√≥n de tipos de suelo con Sentinel-2: un enfoque basado en datacubes</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">7.12.1. Introducci√≥n</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#coleccion-de-imagenes-sentinel-2-y-preparacion-del-mosaico-base">7.12.2. Colecci√≥n de im√°genes Sentinel-2 y preparaci√≥n del mosaico base</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#definicion-de-clases-de-suelo-y-preparacion-de-datos-de-entrenamiento">7.13. Definici√≥n de clases de suelo y preparaci√≥n de datos de entrenamiento</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#entrenamiento-del-modelo-random-forest">7.13.1. Entrenamiento del modelo Random Forest</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#clasificacion-de-la-imagen-y-visualizacion-del-resultado">7.13.2. Clasificaci√≥n de la imagen y visualizaci√≥n del resultado</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#evaluacion-del-modelo">7.13.3. Evaluaci√≥n del modelo</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#configuracion-de-la-serie-temporal">7.13.4. Configuraci√≥n de la serie temporal</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#clasificacion-temporal-e-interpretacion-del-datacube">7.13.5. Clasificaci√≥n temporal e interpretaci√≥n del datacube</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#interpretacion-especifica-ejemplo-marzo-2024">7.13.6. Interpretaci√≥n espec√≠fica: ejemplo marzo 2024</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#conclusion">7.13.7. Conclusi√≥n</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ejemplo-2-serie-temporal-de-clases-de-suelo-con-clasificador-entrenado">7.14. Ejemplo 2: Serie Temporal de Clases de Suelo con Clasificador Entrenado</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#bloque-2-definicion-de-etiquetas-de-clases">7.14.1. BLOQUE 2: Definici√≥n de etiquetas de clases</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#bloque-3-aplicacion-del-clasificador-por-periodo">7.14.2. BLOQUE 3: Aplicaci√≥n del clasificador por per√≠odo</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#bloque-4-conteo-de-pixeles-por-clase">7.14.3. BLOQUE 4: Conteo de p√≠xeles por clase</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#bloque-5-visualizacion-absoluta">7.14.4. BLOQUE 5: Visualizaci√≥n absoluta</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#bloque-6-conversion-a-porcentajes">7.14.5. BLOQUE 6: Conversi√≥n a porcentajes</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#bloque-7-visualizacion-porcentual">7.14.6. BLOQUE 7: Visualizaci√≥n porcentual</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id3">7.15. Conclusi√≥n</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#video-del-capitulo">7.16. Video del cap√≠tulo</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Luis Reynoso (IDERA-GTT CDG)
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      ¬© Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>